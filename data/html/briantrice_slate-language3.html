<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>briantrice_slate-language3</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>The same steps can also be accomplished with: make slate.image</p>
<h2 id="debugging-slate-code">Debugging Slate Code</h2>
<p>Within the REPL, if an error arises, a debugger prompt will appear: slate[1]&gt; foo. Debugging: MethodNotFound traitsWindow The following condition was signaled: The method #foo was not found for the following arguments: {(previousREPLMethod)}</p>
<pre><code>Available Restarts:
restart: 0  Abort evaluation of expression
restart: 1  Quit Slate

Enter &#39;help.&#39; for instructions.
slate-debug[0..1][frame: 0]&gt; </code></pre>
<p>Type in <code>help.</code> to see other commands or <code>restart: 0.</code> or just <code>0.</code> to escape usually.</p>
<h2 id="debugging-the-vm">Debugging the VM</h2>
<pre><code>make vmclean &amp;&amp; make DEBUG=1
gdb slate
r -i &lt;image-file&gt;
(on crash or Ctrl-c)
bt
f &lt;n&gt; (change frame to one with an &#39;oh&#39; object (struct object_heap*))</code></pre>
<p>See the slate backtrace -&gt; <code>print print_backtrace(oh)</code> Inspect an object -&gt; <code>print print_detail(oh, struct Object*)</code> See the stack -&gt; <code>print print_stack_types(oh, 200)</code></p>
<p>Build flags (e.g. <code>make vmclean &amp;&amp; make DEBUG=1 EXTRACFLAGS=&quot;-DGC_BUG_CHECK -DSLATE_DISABLE_METHOD_OPTIMIZATION -DSLATE_DISABLE_PIC_LOOKUP&quot;</code>):</p>
<p><code>GC_BUG_CHECK</code>: extra features for debugging the GC</p>
<p><code>GC_INTEGRITY_CHECK</code>: check all the object memory to make sure it looks good after a GC</p>
<p><code>SLATE_DISABLE_METHOD_OPTIMIZATION</code>: Donâ€™t optimize methods after calling them a lot. Right now it sets method-&gt;oldCode to the current code. In the future it should do inlining.</p>
</body>
</html>
