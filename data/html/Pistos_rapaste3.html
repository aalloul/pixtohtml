<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Pistos_rapaste3</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>It’s pure Ruby, reasonably fast and accurate. Some design decisions were to limit it to words longer than 4 characters (apart from a few exceptions), smaller words tend to skew the results and are often not meaningful enough. Unknown words have minimal impact on the result.</p>
<p>Further reading on bayesian filtering:</p>
<ul>
<li>http://www.paulgraham.com/spam.html</li>
<li>http://www.process.com/precisemail/bayesian_filtering.htm</li>
<li>http://en.wikipedia.org/wiki/Bayesian_filtering</li>
</ul>
<h3 id="finetuning-bayes">Finetuning Bayes</h3>
<p>After your first startup you will have a new file at <code>db/bayes.marshal</code>, which contains the marshalled contents of the <span class="citation" data-cites="categories">@categories</span> hash from the <code>Bayes</code> instance. It is seeded with some words from <code>db/spam.txt</code> and <code>db/ham.txt</code> initially, and will grow when you use the <code>/spam</code> interface. In case you want to correct something or change the scoring you can load it in irb:</p>
<pre><code>bayes = Marshal.load(File.read(&#39;db/bayes.marshal&#39;))</code></pre>
<p>To write it back you simple do:</p>
<pre><code>File.open(&#39;db/bayes.marshal&#39;, &#39;w+&#39;){|b| b.write(Marshal.dump(bayes)) }</code></pre>
<p>So let’s say you have collected some textfiles with spam and ham and would like to train the filter with it, but without pasting:</p>
<pre><code>require &#39;vendor/bayes&#39;

bayes = Bayes.new(&#39;bayes.marshal&#39;)

spam = File.read(&#39;stuff/spam.txt&#39;)
ham = File.read(&#39;stuff/ham.txt&#39;)

bayes.train :spam, spam
bayes.train :ham, ham

bayes.store</code></pre>
<p>The final <code>bayes.store</code> will reflect the changes into <code>bayes.marshal</code> so when you issue <code>Bayes.new('bayes.marshal')</code> next time it will automatically load your filter.</p>
<h2 id="todo">Todo</h2>
<ul>
<li>Documentation</li>
</ul>
</body>
</html>
