<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Roman2K_web-service2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h3 id="crud">CRUD</h3>
<pre><code>article = Article.new(:title =&gt; &quot;First article&quot;)
begin
  article.save
  # =&gt; POST /articles
rescue WebService::ResourceInvalid
  article.body = &quot;Like the title says.&quot;
  article.save
  # =&gt; POST /articles
end

article.body += &quot; Updated.&quot;
article.save
# =&gt; PUT /articles/1

article.destroy
# =&gt; DELETE /articles/1</code></pre>
<h3 id="fetching">Fetching</h3>
<pre><code>article.id            # =&gt; 1
Article[1] == article # =&gt; true
Article[99]           # =&gt; nil
Article.find(99)      # raises WebService::ResourceNotFound

Article.all           # =&gt; [Article[1], ..., Article[42]]
Article.first         # =&gt; Article[1]
Article.last          # =&gt; Article[42]

comment = Comment.new(:article_id =&gt; 1)
comment.article       # =&gt; Article[1]
# =&gt; GET /articles/1
comment.article       # =&gt; Article[1]
# =&gt; (cache hit)</code></pre>
<h3 id="nested-resources-associations">Nested resources (associations)</h3>
<p>Use <code>article.comments</code> like you would <code>Comment</code>, only scoped to <code>article</code>.</p>
<pre><code>article.comments.all
# =&gt; GET /articles/1/comments</code></pre>
<p>Associating a comment with a article:</p>
<pre><code>article.comments.create(:body =&gt; &quot;First comment.&quot;)
# =&gt; POST /articles/1/comments</code></pre>
<p>The same in a more formal way:</p>
</body>
</html>
