<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>stevej_configgy8</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h3 id="subscription-api">Subscription API</h3>
<p>Subscribing to an <code>AttributesMap</code> causes the subscriber to get called on every change to that node. For monitored config nodes, changes happen in two phases: validate and commit.</p>
<p>In validation, you can verify that the new settings for this config node are reasonable and consistent, and if not, you can throw an exception to reject the change.</p>
<p>If all subscribers successfully validate a change, the commit method is called to notify subscribers that the change was successful. If any subscriber refuses to validate a change, the code that called <code>set</code> should be prepared to catch the validation exception.</p>
<h3 id="logging">Logging</h3>
<p>To access a logger from within a class or object, you can usually just use:</p>
<pre><code>import net.lag.logging.Logger
private val log = Logger.get</code></pre>
<p>This creates a <code>Logger</code> object that uses the current class or object’s package name as the logging node, so class “com.example.foo.Lamp” will log to node “com.example.foo” (generally showing “foo” as the name in the logfile). You can also get a logger explicitly by name:</p>
<pre><code>private val log = Logger.get(&quot;com.example.foo&quot;)</code></pre>
<p>Logger objects wrap everything useful from “java.util.logging.Logger”, as well as adding some convenience methods:</p>
<pre><code>// log a string with sprintf conversion:
log.info(&quot;Starting compaction on level %d...&quot;, level)

try {
    ...
} catch {
    // log an exception backtrace with the message:
    case x: IOException =&gt; log.info(x, &quot;I/O exception: %s&quot;, x.getMessage)
}</code></pre>
<p>Each of the log levels (from “fatal” to “trace”) has these two convenience methods. You may also use <code>log</code> directly:</p>
<pre><code>log(Logger.DEBUG, &quot;Logging %s at debug level.&quot;, name)</code></pre>
</body>
</html>
