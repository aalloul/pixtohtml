<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>3scale_3scale_ws_api_for_java4</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>params.add(“app_id”, “your_oauth_app_id”); // Add the app_id of your application for authorization</p>
<p>String serviceToken = …; // Your 3scale service token String serviceId = …; // The service id of your application</p>
<p>ParameterMap usage = new ParameterMap(); // Add a metric to the call usage.add(“hits”, “1”); params.add(“usage”, usage); // metrics belong inside the usage parameter</p>
<p>// for OAuth only the ‘2 steps way’ (authorize + report) is available try { AuthorizeResponse response = serviceApi.oauth_authorize(serviceToken, serviceId, params); // Perform OAuth authorize System.out.println(“Authorize on OAuth Success:” + response.success()); if (response.success() == true) {</p>
<pre><code>  // your api access got authorized

  // you check the client&#39;s secret returned by the backend
  System.out.println(&quot;OAuth Client Secret: &quot; + response.getClientSecret());

  // let&#39;s do a report
  ParameterMap transaction = new ParameterMap();
  transaction.add(&quot;app_id&quot;, &quot;your_oauth_app_id&quot;);

  ParameterMap transaction_usage = new ParameterMap();
  transaction_usage.add(&quot;hits&quot;, &quot;1&quot;);
  transaction.add(&quot;usage&quot;, transaction_usage);

  try {
      final ReportResponse report_response = serviceApi.report(&quot;your_oauth_service_id&quot;, transaction);

      if (report_response.success()) {
          System.out.println(&quot;Report on OAuth was successful&quot;);
      } else {
          System.out.println(&quot;Report on OAuth failed&quot;);
      }
  } catch (ServerError serverError) {
      serverError.printStackTrace();
  }
} else {
  // your api access did not got authorized, check why
  System.out.println(&quot;Error: &quot; + response.getErrorCode());
  System.out.println(&quot;Reason: &quot; + response.getReason());
}</code></pre>
<p>} catch (ServerError serverError) { serverError.printStackTrace(); } ```</p>
<p>To test</p>
</body>
</html>
