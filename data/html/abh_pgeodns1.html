<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>abh_pgeodns1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="pgeodns---geo-aware-authoriative-domain-nameserver">pgeodns - geo-aware authoriative domain nameserver</h1>
<h2 id="golang-based-version">Golang based version</h2>
<p>This program was . That version is faster, now has more features and has (also) endured billions and billions of production requests.</p>
<h2 id="pgeodns">Pgeodns</h2>
<p>pgeodns is an authoritative DNS server that can give different replies to each client, taking into account the country of origin of the client and do weighted responses so some records are returned more than others.</p>
<p>It’s used to give IPs of “nearby” servers among the almost 2000 servers registered in the NTP Pool. The responses are also weighted by the available bandwidth for each IP (as configued by the server admins).</p>
<p>It’s also used by apache.org for svn.apache.org to send European users to their European SVN mirror and North American ones to the US based server. They are providing their configuration as a minimal example: https://svn.apache.org/repos/infra/infrastructure/trunk/dns/zones/pgeodns.conf https://svn.apache.org/repos/infra/infrastructure/trunk/dns/zones/geo.apache.org.json</p>
<h2 id="installation">Installation</h2>
<p>perl Makefile.PL # will warn if any dependencies are missing make make test # optional make install</p>
<p>You’ll need the following modules installed, all available from CPAN: Net::DNS, Geo::IP, List::Util, JSON. It’s optional, but if you install JSON::XS loading large zone data files will be ever so slightly faster.</p>
<h2 id="configuration">Configuration</h2>
<p>pgeodns needs two configuration files; one simple text file to define the zones served and some options, and then for each zone a JSON formatted data file with the zone data.</p>
<p>is relatively easy to read and write for humans, and extremely easy for computers to use, practically in any language.</p>
<p>The pgeodns.conf file should look like the following. Only one or more “base” lines are required.</p>
</body>
</html>
