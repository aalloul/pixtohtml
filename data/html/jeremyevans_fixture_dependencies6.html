<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jeremyevans_fixture_dependencies6</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>is only a load order inside a specific association, associations are stored in the same hash as attributes and are loaded in an arbitrary order.</p>
<h2 id="many_to_manyhas_and_belongs_to_many-join-table-fixtures">many_to_many/has_and_belongs_to_many join table fixtures</h2>
<p>Another change is that Rails defaults allow you to specify habtm join tables in fixtures. That doesnâ€™t work with fixture dependencies, as there is no associated model. Instead, you use a has_and_belongs_to_many association name in the the appropriate model fixtures (see above).</p>
<h2 id="belongs_tomany_to_one-polymorphic-fixtures">belongs_to/many_to_one polymorphic fixtures</h2>
<p>ActiveRecord supports polymorphic associations by default. With Sequel, this is made via the <code>sequel_polymorphic</code> gem.</p>
<p>Here the mapping in Rails:</p>
<pre><code>class Animal &lt; ActiveRecord::Base
  has_many :fruits, as: :eater
end
class Fruit &lt; ActiveRcord::Base
  belongs_to :eater, polymorphic: true
end</code></pre>
<p>And here on Sequel:</p>
<pre><code>require &#39;sequel_polymorphic&#39;
class Animal &lt; Sequel::Model
  plugin :polymorphic
  ony_to_many :fruits, as: :eater
end
class Fruit &lt; Sequel::Model
  plugin :polymorphic
  many_to_one :eater, polymorphic: true
end</code></pre>
<p>In both cases, the fixtures looks like:</p>
<p><code>animals.yml</code>:</p>
<pre><code>george:
  id: 1
  name: George</code></pre>
</body>
</html>
