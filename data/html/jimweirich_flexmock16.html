<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jimweirich_flexmock16</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>class TestDogBarking &lt; Test::Unit::TestCase include FlexMock::TestCase</p>
<pre><code># Setup the tests by mocking the +new+ method of
# Woofer and return a mock woofer.
def setup
  @dog = Dog.new
  flexmock(@dog, :bark =&gt; :grrr)
end

def test_dog
  assert_equal :grrr, @dog.bark   # Mocked Method
  assert_equal :happy, @dog.wag    # Normal Method
end</code></pre>
<p>end ```</p>
<p>The nice thing about this technique is that after the test is over, the mocked out methods are returned to their normal state. Outside the test everything is back to normal.</p>
<p><strong>NOTE:</strong> <em>In previous versions of FlexMock, partial mocking was called “stubs” and the <code>flexstub</code> method was used to create the partial mocks. Although partial mocks were often used as stubs, the terminology was not quite correct. The current version of FlexMock uses the <code>flexmock</code> method to create both regular stubs and partial stubs. A version of the <code>flexstub</code> method is included for backwards compatibility. See Martin Fowler’s article <a href="http://www.martinfowler.com/articles/mocksArentStubs.html%20%22Mocks%20Aren&#39;t%20Stubs%22"><em>Mocks Aren’t Stubs</em></a> for a better understanding of the difference between mocks and stubs.</em></p>
<p>This partial mocking technique was inspired by the <code>Stuba</code> library in the <code>Mocha</code> project.</p>
<h3 id="spies">Spies</h3>
<p>FlexMock supports spy-like mocks as well as the traditional mocks.</p>
<p>```ruby # In Test::Unit / MiniTest class TestDogBarking &lt; Test::Unit::TestCase def test_dog dog = flexmock(:on, Dog) dog.bark(“loud”) assert_spy_called dog, :bark, “loud” end end</p>
<p># In RSpec</p>
</body>
</html>
