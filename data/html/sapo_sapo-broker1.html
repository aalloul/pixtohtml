<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>sapo_sapo-broker1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="sapo-broker---maven-edition">Sapo Broker - Maven Edition</h1>
<h4 id="here-will-be-documented-variables-and-goals-used-to-build-and-execute-broker-agents-and-clients-and-their-dependencies.">Here will be documented variables and goals used to build and execute broker agents and clients, and their dependencies.</h4>
<p>To build with maven:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1">    <span class="ex">mvn</span> clean install</a></code></pre></div>
<p>To build a debian package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1">    <span class="ex">mvn</span> package</a></code></pre></div>
<p>To run the agent directly from maven:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1">    <span class="ex">mvn</span> exec:java</a></code></pre></div>
<p>The package will be at the target directory.</p>
<ol type="1">
<li><strong>Clean and Build</strong> - in order to build all components please execute <strong><em>mvn install</em></strong> on the root of the project. If you need to clean all previous builds before a new build execute <strong><em>mvn clean</em></strong>. You can combine both goals by executing <strong><em>mvn clean install</em></strong>. You can run these goals on each submodule separately if you only need to update or bundle one of these submodules. All the created jars and necessary files are accessible through the created <em>target</em> folder on each submodule. All inner dependencies follow the global’s project version.</li>
<li><strong>Jar with dependencies</strong> - if you include a file named <strong><em>with-deps</em></strong> on the root of your submodule, a jar with all dependencies is created on the target folder.</li>
<li><strong>Configurable properties (inside the POM or within the command line execution)</strong>
<ul>
<li><strong>mainClass</strong> - class that will be included on the jar manifest as main Class. In conjunction with jar with dependencies feature you can then execute the resulting jar by calling <strong><em>mvn exec:exec</em></strong> or <strong><em>java -jar [jar-with-dependencies]</em></strong></li>
<li><strong>className</strong> - on some submodules the mainClass can already be defined, sapo-broker-java-client for example, as <em><mainClass>pt.com.broker.client.sample.${className}</mainClass></em>, being then possible to execute different client types through the command line using the option <strong><em>-DclassName=[class name]</em></strong></li>
<li><strong>extraArgs</strong> - extra JVM options specific to each module. They will be concatenated with the default JVM options defined on Sapo’s parent POM (-server -Xverify:none -Xms32M -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv6Addresses=false -Dfile.encoding=UTF-8)</li>
<li><strong>extraOptions</strong> - execution options that will be accessible through the <em>String[] args</em> parameter on the main method of the executable class.</li>
</ul></li>
<li><strong>Sapo’s maven repository (important links)</strong> - All dependencies used originate from our .</li>
</ol>
<p><strong>The most important central maven repositories are proxied by .</strong></p>
<h2 id="vagrant">Vagrant</h2>
<p>There is a pre-configured box with the tools that you need start using sapo broker.</p>
<p>```bash git submodule init git submodule update cd vagrant cp Vagrantfile.orig Vagrantfile vagrant plugin install vagrant-share vagrant plugin install vagrant-vbguest vagrant plugin install vagrant-timezone vagrant up</p>
</body>
</html>
