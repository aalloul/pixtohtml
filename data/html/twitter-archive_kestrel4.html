<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>twitter-archive_kestrel4</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>locally.</p>
<pre><code>$ sbt clean update package-dist
$ ./dist/kestrel-VERSION/scripts/devel.sh</code></pre>
<h2 id="put-many">Put-many</h2>
<p>This test just spams a kestrel server with “put” operations, to see how quickly it can absorb and journal them.</p>
<p>A sample run on a 2010 MacBook Pro:</p>
<pre><code>$ ./dist/kestrel/scripts/load/put-many -n 100000
Put 100000 items of 1024 bytes to localhost:22133 in 1 queues named spam
  using 100 clients.
Finished in 6137 msec (61.4 usec/put throughput).
Transactions: min=71.00; max=472279.00 472160.00 469075.00;
  median=3355.00; average=5494.69 usec
Transactions distribution: 5.00%=485.00 10.00%=1123.00 25.00%=2358.00
  50.00%=3355.00 75.00%=4921.00 90.00%=7291.00 95.00%=9729.00
  99.00%=50929.00 99.90%=384638.00 99.99%=467899.00</code></pre>
<h2 id="many-clients">Many-clients</h2>
<p>This test has one producer that trickles out one item at a time, and a pile of consumers fighting for each item. It usually takes exactly as long as the number of items times the delay, but is useful as a validation test to make sure kestrel works as advertised without blowing up.</p>
<p>A sample run on a 2010 MacBook Pro:</p>
<pre><code>$ ./dist/kestrel/scripts/load/many-clients
many-clients: 100 items to localhost using 100 clients, kill rate 0%,
  at 100 msec/item
Received 100 items in 11046 msec.</code></pre>
<p>This test always takes about 11 seconds – it’s a load test instead of a speed test.</p>
<h2 id="flood">Flood</h2>
<p>This test starts up one producer and one consumer, and just floods items through kestrel as fast as it can.</p>
<p>A sample run on a 2010 MacBook Pro:</p>
<pre><code>$ ./dist/kestrel/scripts/load/flood
flood: 1 threads each sending 10000 items of 1kB through spam
Finished in 1563 msec (156.3 usec/put throughput).
Consumer(s) spun 0 times in misses.</code></pre>
</body>
</html>
