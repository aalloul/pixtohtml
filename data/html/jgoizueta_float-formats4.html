<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jgoizueta_float-formats4</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>puts v.to_bits                                   # -&gt; 00111111111110111100110011001100110011001100110011001100110011001100110011001101
puts v.to_bits_text(16)                          # -&gt; 3ffbcccccccccccccccd</code></pre>
<h2 id="special-values">Special values:</h2>
<p>Letâ€™s show the decimal expression of some interesting values using 3 significative digits:</p>
<pre><code>fmt = Nio::Fmt.mode(:gen,3)  
puts IEEE_SINGLE.min_value.to_text(fmt)             # -&gt; 2E-45
puts IEEE_SINGLE.min_normalized_value.to_text(fmt)  # -&gt; 1.18E-38
puts IEEE_SINGLE.max_value.to_text(fmt)             # -&gt; 3.4E38
puts IEEE_SINGLE.epsilon.to_text(fmt)               # -&gt; 1.19E-7</code></pre>
<h2 id="convert-between-formats">Convert between formats</h2>
<pre><code>v = IEEE_EXTENDED.from_text(&#39;1.1&#39;)
v = v.convert_to(IEEE_SINGLE)
v = v.convert_to(IEEE_DEC64)</code></pre>
<h1 id="tools-for-the-native-floating-point-format">Tools for the native floating point format</h1>
<p>This is an optional module to perform conversions and manipulate the native Float format.</p>
<pre><code>require &#39;float-formats/native&#39;
include Flt

puts float_shortest_dec(0.1)                     # -&gt; 0.1
puts float_significant_dec(0.1)                  # -&gt; 0.10000000000000001
puts float_dec(0.1)                              # -&gt; 0.1000000000000000055511151231257827021181583404541015625
puts float_bin(0.1)                              # -&gt; 1.100110011001100110011001100110011001100110011001101E-4
puts hex_from_float(0.1)                         # -&gt; 0x1999999999999ap-56

puts float_significant_dec(Float::MIN_D)           # -&gt; 5E-324
puts float_significant_dec(Float::MAX_D)           # -&gt; 2.2250738585072009E-308
puts float_significant_dec(Float::MIN_N)           # -&gt; 2.2250738585072014E-308</code></pre>
<p>Together with flt/sugar (from Flt) can be use to explore or work with Floats:</p>
<pre><code>require &#39;flt/sugar&#39;

puts 1.0.next_plus-1 == Float::EPSILON              # -&gt; true
puts float_shortest_dec(1.0.next_plus)              # -&gt; 1.0000000000000002
puts float_dec(1.0.next_minus)                      # -&gt; 0.99999999999999988897769753748434595763683319091796875
puts float_dec(1.0.next_plus)                       # -&gt; 1.0000000000000002220446049250313080847263336181640625
puts float_bin(1.0.next_plus)                       # -&gt; 1.0000000000000000000000000000000000000000000000000001E0
puts float_bin(1.0.next_minus)                      # -&gt; 1.1111111111111111111111111111111111111111111111111111E-1

puts float_significant_dec(Float::MIN_D.next_plus)  # -&gt; 1.0E-323
puts float_significant_dec(Float::MAX_D.next_minus) # -&gt; 2.2250738585072004E-308</code></pre>
</body>
</html>
