<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jeremyevans_fixture_dependencies4</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h2 id="loading-individual-fixtures-with-fixtures-class-method">Loading individual fixtures with fixtures class method</h2>
<p>There is support for loading individual fixtures (and just their dependencies), using the following syntax:</p>
<pre><code>  class EmployeeTest &lt; Test::Unit::TestCase
    fixtures :employee__jeremy # Note the double underscore
  end</code></pre>
<p>This would load just the jeremy fixture and its dependencies. I find this is much better than loading all fixtures in most of my test suites. Even better is loading just the fixtures you want inside every test method (see below). This leads to the most robust testing.</p>
<h2 id="loading-fixtures-inside-test-methods">Loading fixtures inside test methods</h2>
<p>I find that it is often better to skip the use of the fixtures method entirely, and load the fixtures I want manually in each test method. This provides for the loosest coupling possible. Here’s an example:</p>
<pre><code>  class EmployeeTest &lt; Test::Unit::TestCase
    def test_employee_name
      # Load the fixture and return the Employee object
      employee = load(:employee__jeremy)
      # Test the employee
    end

    def test_employees
      # Load the fixtures and return two Employee objects
      employee1, employee2 = load(:employees=&gt;[:jeremy, :karl])
      # Test the employees
    end

    def test_award_statistics
      #  Load all fixtures in both tables
      load(:employee_award__jeremy_first, :award__first)
      # Test the award_statistics method
      #  (which pulls data from the tables loaded above)
    end
  end</code></pre>
<p>Don’t worry about loading the same fixture twice, if a fixture is already loaded, it won’t attempt to load it again.</p>
<h2 id="loading-attributes-only">Loading attributes only</h2>
</body>
</html>
