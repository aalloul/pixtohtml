<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>thoughtbot_paperclip10</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>will not cause errors to be raised.</p>
<p>This can sometimes cause false validation errors in applications that use custom file extensions. In these cases you may wish to add your custom extension to the list of content type mappings by creating <code>config/initializers/paperclip.rb</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Allow &quot;.foo&quot; as an extension for files with the MIME type &quot;text/plain&quot;.</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="dt">Paperclip</span>.options[<span class="st">:content_type_mappings</span>] = {</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="st">foo: </span>%w(text/plain)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">}</a></code></pre></div>
<hr />
<h2 id="defaults">Defaults</h2>
<p>Global defaults for all your Paperclip attachments can be defined by changing the Paperclip::Attachment.default_options Hash. This can be useful for setting your default storage settings per example so you won’t have to define them in every <code>has_attached_file</code> definition.</p>
<p>If you’re using Rails, you can define a Hash with default options in <code>config/application.rb</code> or in any of the <code>config/environments/*.rb</code> files on config.paperclip_defaults. These will get merged into <code>Paperclip::Attachment.default_options</code> as your Rails app boots. An example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">module</span> <span class="dt">YourApp</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="kw">class</span> <span class="dt">Application</span> &lt; <span class="dt">Rails</span>::<span class="dt">Application</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    <span class="co"># Other code...</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    config.paperclip_defaults = { <span class="st">storage: :fog</span>, <span class="st">fog_credentials: </span>{ <span class="st">provider: &quot;Local&quot;</span>, <span class="st">local_root: &quot;</span><span class="ot">#{</span><span class="dt">Rails</span>.root<span class="ot">}</span><span class="st">/public&quot;</span>}, <span class="st">fog_directory: &quot;&quot;</span>, <span class="st">fog_host: &quot;localhost&quot;</span>}</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">end</span></a></code></pre></div>
<p>Another option is to directly modify the <code>Paperclip::Attachment.default_options</code> Hash - this method works for non-Rails applications or is an option if you prefer to place the Paperclip default settings in an initializer.</p>
<p>An example Rails initializer would look something like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="dt">Paperclip</span>::<span class="dt">Attachment</span>.default_options[<span class="st">:storage</span>] = <span class="st">:fog</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="dt">Paperclip</span>::<span class="dt">Attachment</span>.default_options[<span class="st">:fog_credentials</span>] = { <span class="st">provider: &quot;Local&quot;</span>, <span class="st">local_root: &quot;</span><span class="ot">#{</span><span class="dt">Rails</span>.root<span class="ot">}</span><span class="st">/public&quot;</span>}</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="dt">Paperclip</span>::<span class="dt">Attachment</span>.default_options[<span class="st">:fog_directory</span>] = <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="dt">Paperclip</span>::<span class="dt">Attachment</span>.default_options[<span class="st">:fog_host</span>] = <span class="st">&quot;http://localhost:3000&quot;</span></a></code></pre></div>
<hr />
<h2 id="migrations">Migrations</h2>
<p>Paperclip defines several migration methods which can be used to create the necessary columns in your model. There are two types of helper methods to aid in this, as follows:</p>
<h3 id="add-attachment-column-to-a-table">Add Attachment Column To A Table</h3>
</body>
</html>
