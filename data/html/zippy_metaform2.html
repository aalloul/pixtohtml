<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>zippy_metaform2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>simply add: &lt;%<span class="citation" data-cites="metaform_include_assets">@metaform_include_assets</span> = true%&gt; to the top of the view that shows a form.</p>
<h2 id="database-dependencies">Database dependencies</h2>
<p>Currently Metaform can use mysql, postgres or sqlite 3 and detects which is in use on initialization. If you are using metaform to collect substantial amounts of data we recommend using postgres as it scales the best. In the works is converting Metaform to work with no-SQL databases (probably couchDB to start with) which should make Metaform truly scalable.</p>
<h2 id="the-metaform-domain-specific-language-dsl">The Metaform Domain Specific Language (DSL)</h2>
<p>Metaform defines an abstraction that separates data definition from data display. Much like you are used to in rails data model and views. To use the metaform definition language simply create a +forms+ directory in your rails app, with a file in it that ends in “form.rb” Metaform will auto-create a form class by the name of the file from definitions in the file.</p>
<h3 id="defining-the-data-model-fields-with-constraints-and-workflows">Defining the data model– fields with constraints, and workflows</h3>
<h4 id="fields">fields</h4>
<pre><code>def_fields &lt;field_options&gt; do
    f &lt;field_name&gt;,&lt;field_options&gt;
end</code></pre>
<p><field_options> are: :type =&gt; <field_type> :constrants =&gt; <constraints> :default =&gt; true | false :indexed_default_from_null_index =&gt; true|false :followups =&gt; { <value> | !<value> | /<regex>/ =&gt; f(<field_name>, <field_options>) }</p>
<p><constraints> are a hash of key value pairs: ‘required’ =&gt; true | false ‘regex’ =&gt; ‘<regex>’ ‘range’ =&gt; ‘<start>-<end>’ ‘set’ =&gt; <value_label_pairs> ‘enumeration’ =&gt; <value_label_pairs></p>
<p><value_label_pairs> are an array of key value pairs of the form: [{<value> =&gt; <human_label>},…]</p>
<h4 id="workflows">workflows</h4>
<pre><code>def_workflows &lt;work_flow_name&gt; do
    action &lt;name&gt;,[&lt;legal_states&gt;...] do |meta|
      # the meta hash provides access to various things:
  # meta[:request] the request object
  # meta[:session] the session object
  # meta[:record] the record object</code></pre>
</body>
</html>
