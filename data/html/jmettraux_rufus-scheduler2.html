<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jmettraux_rufus-scheduler2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p># do something every day, five minutes after midnight # (see “man 5 crontab” in your terminal) end</p>
<h1 id="section">…</h1>
<p>```</p>
<h2 id="non-features">non-features</h2>
<p>Rufus-scheduler (out of the box) is an in-process, in-memory scheduler. It uses threads.</p>
<p>It does not persist your schedules. When the process is gone and the scheduler instance with it, the schedules are gone.</p>
<p>A rufus-scheduler instance will go on scheduling while it is present among the object in a Ruby process. To make it stop scheduling you have to call its <a href="#schedulershutdown"><code>#shutdown</code> method</a>.</p>
<h2 id="related-and-similar-gems">related and similar gems</h2>
<ul>
<li><ul>
<li>let cron call back your Ruby code, trusted and reliable cron drives your schedule</li>
</ul></li>
<li><ul>
<li>rufus-scheduler inspired gem</li>
</ul></li>
<li><ul>
<li>an in-Rails cron scheduler</li>
</ul></li>
<li>and more</li>
</ul>
<p>(please note: rufus-scheduler is not a cron replacement)</p>
<h2 id="note-about-the-3.0-line">note about the 3.0 line</h2>
<p>It’s a complete rewrite of rufus-scheduler.</p>
<p>There is no EventMachine-based scheduler anymore.</p>
<h2 id="i-dont-know-what-this-ruby-thing-is-where-are-my-rails">I don’t know what this Ruby thing is, where are my Rails?</h2>
<p>I’ll drive you right to the <a href="#so-rails">tracks</a>.</p>
<h2 id="notable-changes">Notable changes:</h2>
<ul>
<li>As said, no more EventMachine-based scheduler</li>
<li><code>scheduler.every('100') {</code> will schedule every 100 seconds (previously, it would have been 0.1s). This aligns rufus-scheduler on Ruby’s <code>sleep(100)</code></li>
<li>The scheduler isn’t catching the whole of Exception anymore, only StandardError</li>
<li>The error_handler is <a href="#rufusscheduleron_errorjob-error">#on_error</a> (instead of #on_exception), by default it now prints the details of the error to $stderr (used to be $stdout)</li>
<li>Rufus::Scheduler::TimeOutError renamed to Rufus::Scheduler::TimeoutError</li>
<li>Introduction of “interval” jobs. Whereas “every” jobs are like “every 10 minutes, do this”, interval jobs are like “do that, then wait for 10 minutes, then do that again, and so on”</li>
<li>Introduction of a :lockfile =&gt; true/filename mechanism to prevent multiple schedulers from executing</li>
<li>“discard_past” is on by default. If the scheduler (its host) sleeps for 1 hour and a <code>every '10m'</code> job is on, it will trigger once at wakeup, not 6 times (discard_past was false by default in rufus-scheduler 2.x). No intention to re-introduce <code>:discard_past =&gt; false</code> in 3.0 for now.</li>
<li>Introduction of Scheduler #on_pre_trigger and #on_post_trigger callback points</li>
</ul>
</body>
</html>
