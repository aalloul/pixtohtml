<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>airblade_geo_tools2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>where:

    xx is degrees (0 &lt;= integer &lt;= 90; maximum length of 2 digits)
    yy is minutes (0 &lt;= integer &lt;= 59; maximum length of 2 digits; optional; defaults to 0)
    zz is decimal-minutes (0 &lt;= integer &lt;= 99; maximum length of 2 digits; optional; defaults to 0)
    h is hemisphere (&#39;N&#39; or &#39;S&#39;)

Note with decimal minutes 2, 20 and 200000 are equivalent.  This is because 3.2, 3.20 and 3.200000 are equivalent.</code></pre>
<ul>
<li><p>Similarly, a longitude should be entered on a form like this:</p>
<pre><code>  xxx &lt;degree symbol&gt; yy &lt;decimal point&gt; zz h</code></pre>
<p>where:</p>
<pre><code>  xxx is degrees (0 &lt;= integer &lt;= 180; maximum length of 3 digits)
  yy is minutes (0 &lt;= integer &lt;= 59; maximum length of 2 digits; optional; defaults to 0)
  zz is decimal-minutes (0 &lt;= integer &lt;= 99; maximum length of 2 digits; optional; defaults to 0)
  h is hemisphere (&#39;E&#39; or &#39;W&#39;)</code></pre></li>
</ul>
<h2 id="example">Example</h2>
<pre><code># Model
class Treasure &lt; ActiveRecord::Base
  acts_as_location
end

# View
&lt;% form_for @treasure do |f| %&gt;
  &lt;%= f.text_field :spot_marked_by %&gt;
  &lt;%= f.latitude_field :latitude %&gt;
  &lt;%= f.longitude_field :longitude %&gt;
&lt;% end %&gt;

# Controller
# ...same as usual...</code></pre>
<p>You’ll get validation on every field (degrees, minutes, decimal-minutes, hemisphere) generated by the form helpers, though not the overall value any more (TBD).</p>
<p>Here’s an example script/console session:</p>
<pre><code>&gt;&gt; puts Treasure.find(:first).location
12°34.56′N, 012°34.56′W   # N.B. If this looks weird online, set your browser&#39;s text encoding to UTF-8.

&gt;&gt; puts Treasure.find(:first).location.latitude
12.576

&gt;&gt; puts Treasure.find(:first).location.longitude
-12.576</code></pre>
</body>
</html>
