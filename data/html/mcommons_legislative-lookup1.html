<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>mcommons_legislative-lookup1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="project-tigress">Project Tigress</h1>
<h2 id="description">Description</h2>
<p>Rails application and database to lookup congressional and state legislative districts by latitude and longitude.</p>
<h2 id="installation">Installation</h2>
<p>Install Postgres and postGIS, set up a database, apply the appropriate functions and populate it.</p>
<h3 id="ubuntu-11.04-start">Ubuntu 11.04 Start</h3>
<p>Install Postgress</p>
<pre><code>sudo apt-get install postgresql-contrib postgresql postgresql-9.1-postgis libpq-dev</code></pre>
<p>Postgres won’t let you connect without a password out of the box. Create a new postgres user with a password or configure postgres to trust all connections from localhost and make sure the “postgres” user in postgres doesn’t have a password. These instruction assume the later. You can do that by editing <code>/etc/postgresql/8.4/main/pg_hba.conf</code> and adding a line ABOVE THE DEFAULT RULES like this:</p>
<pre><code>host    all         postgres    127.0.0.1/32          trust</code></pre>
<p>After you create your database you need to add required functions to your database. Note: You’ll need to do the same for your test database - rerun the following w/ DB=“congress_test”</p>
<pre><code>DB=&quot;congress_development&quot; # or whatever you want to call it
sudo -u postgres createdb -E UTF8 $DB
createlang -h localhost -U postgres plpgsql $DB
psql -h localhost -U postgres -d $DB -f /usr/share/postgresql/9.1/contrib/postgis-1.5/postgis.sql
psql -h localhost -U postgres -d $DB -f /usr/share/postgresql/9.1/contrib/postgis-1.5/spatial_ref_sys.sql
psql -h localhost -U postgres -d $DB -c &quot;select postgis_lib_version();&quot; # to make sure postgis works</code></pre>
<h3 id="osx-10.7-start">OSX 10.7 Start</h3>
<p>Download postgres.app from http://postgresapp.com/. Extract it. Copy it to Applications.</p>
<pre><code>$ sudo cp /Applications/Postgres.app/Contents/MacOS/lib/libjpeg* /usr/local/lib # to make postgis work with postgres.app</code></pre>
<p>Run postgres.app.</p>
<pre><code>$ DB=&quot;congress_development&quot;
$ psql -h localhost -c &quot;CREATE DATABASE $DB;&quot;
$ psql -h localhost -d $DB -c &quot;CREATE EXTENSION postgis;&quot;</code></pre>
<h3 id="common-finish-ruby-environment">Common Finish: Ruby Environment</h3>
<pre><code>bundle install
./script/server</code></pre>
</body>
</html>
