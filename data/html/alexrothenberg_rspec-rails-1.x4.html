<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>alexrothenberg_rspec-rails-1.x4</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>  render_views
  ...</code></pre>
<h3 id="upgrade-note">* Upgrade note</h3>
<p><code>render_views</code> replaces <code>integrate_views</code> from rspec-rails-1.3</p>
<h2 id="assigns"><code>assigns</code></h2>
<p>Use <code>assigns(key)</code> to express expectations about instance variables that a controller assigns to the view in the course of an action:</p>
<pre><code>get :index
assigns(:widgets).should eq(expected_value)</code></pre>
<h1 id="view-specs">View specs</h1>
<p>View specs live in spec/views, and mix in ActionView::TestCase::Behavior.</p>
<pre><code>describe &quot;events/index.html.erb&quot; do
  it &quot;renders _event partial for each event&quot; do
    assign(:events, [stub_model(Event), stub_model(Event)])
    render
    view.should render_template(:partial =&gt; &quot;_event&quot;, :count =&gt; 2)
  end
end

describe &quot;events/show.html.erb&quot; do
  it &quot;displays the event location&quot; do
    assign(:event, stub_model(Event,
      :location =&gt; &quot;Chicago&quot;
    )
    render
    rendered.should contain(&quot;Chicago&quot;)
  end
end</code></pre>
<p>View specs infer the controller name and path from the path to the view template. e.g. if the template is “events/index.html.erb” then:</p>
<pre><code>controller.controller_path == &quot;events&quot;
controller.request.path_parameters[:controller] == &quot;events&quot;</code></pre>
<p>This means that most of the time you don’t need to set these values. When spec’ing a partial that is included across different controllers, you <em>may</em> need to override these values before rendering the view.</p>
<p>To provide a layout for the render, you’ll need to specify <em>both</em> the template and the layout explicitly. For example:</p>
</body>
</html>
