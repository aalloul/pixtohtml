<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>rsim_ruby-plsql1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="ruby-plsql">ruby-plsql</h1>
<p>Ruby API for calling Oracle PL/SQL procedures.</p>
<h2 id="description">DESCRIPTION</h2>
<p>ruby-plsql gem provides simple Ruby API for calling Oracle PL/SQL procedures. It could be used both for accessing Oracle PL/SQL API procedures in legacy applications as well as it could be used to create PL/SQL unit tests using Ruby testing libraries.</p>
<p>NUMBER, BINARY_INTEGER, PLS_INTEGER, NATURAL, NATURALN, POSITIVE, POSITIVEN, SIGNTYPE, SIMPLE_INTEGER, VARCHAR, VARCHAR2, NVARCHAR2, CHAR, NCHAR, DATE, TIMESTAMP, CLOB, BLOB, BOOLEAN, PL/SQL RECORD, TABLE, VARRAY, OBJECT and CURSOR types are supported for input and output parameters and return values of PL/SQL procedures and functions.</p>
<p>ruby-plsql supports Ruby 2.2, 2.3, 2.4, 2.5 (ruby-oci8 2.2.3+ is needed for Ruby 2.4) and JRuby 9.1 implementations.</p>
<h2 id="usage">USAGE</h2>
<h3 id="calling-plsql-functions-and-procedures">Calling PL/SQL functions and procedures:</h3>
<p>```ruby require “rubygems” require “ruby-plsql”</p>
<p>plsql.connection = OCI8.new(“hr”,“hr”,“xe”)</p>
<p>plsql.test_uppercase(‘xxx’) # =&gt; “XXX” plsql.test_uppercase(:p_string =&gt; ‘xxx’) # =&gt; “XXX” plsql.test_copy(“abc”, nil, nil) # =&gt; { :p_to =&gt; “abc”, :p_to_double =&gt; “abcabc” } plsql.test_copy(:p_from =&gt; “abc”, :p_to =&gt; nil, :p_to_double =&gt; nil) # =&gt; { :p_to =&gt; “abc”, :p_to_double =&gt; “abcabc” } plsql.hr.test_uppercase(‘xxx’) # =&gt; “XXX” plsql.test_package.test_uppercase(‘xxx’) # =&gt; ‘XXX’</p>
<h1 id="plsql-records-or-object-type-parameters-should-be-passed-as-hash">PL/SQL records or object type parameters should be passed as Hash</h1>
<p>p_employee = { :employee_id =&gt; 1, :first_name =&gt; ‘First’, :last_name =&gt; ‘Last’, :hire_date =&gt; Time.local(2000,01,31) } plsql.test_full_name(p_employee)</p>
<h1 id="table-or-varray-parameters-should-be-passed-as-array">TABLE or VARRAY parameters should be passed as Array</h1>
<p>plsql.test_sum([1,2,3,4])</p>
<h1 id="nested-objects-or-arrays-are-also-supported">Nested objects or arrays are also supported</h1>
<p>p_employee = { :employee_id =&gt; 1, :first_name =&gt; ‘First’, :last_name =&gt; ‘Last’, :hire_date =&gt; Time.local(2000,01,31), :address =&gt; {:street =&gt; ‘Street’, :city =&gt; ‘City’, :country =&gt; ‘Country’}, :phones =&gt; [{:type =&gt; ‘mobile’, :phone_number =&gt; ‘123456’}, {:type =&gt; ‘fixed’, :phone_number =&gt; ‘654321’}]} plsql.test_store_employee(p_employee)</p>
<h1 id="returned-cursor-can-be-fetched">Returned cursor can be fetched</h1>
<p>plsql.test_cursor do |cursor|</p>
</body>
</html>
