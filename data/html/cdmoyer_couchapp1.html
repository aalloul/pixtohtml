<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>cdmoyer_couchapp1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="couchapp-standalone-couchdb-application-development-made-simple">CouchApp: Standalone CouchDB Application Development Made Simple</h1>
<p>CouchApp is a set of helpers and a quickly and correctly. It is maintained and designed by CouchDB committers and community-members to bring clarity and order to the freedom of CouchDB’s document-based approach.</p>
<p>CouchApp <em>is by no means the only way to use CouchDB</em>. CouchDB’s technical roots make it well suited for <strong>very large installations</strong>. CouchApp concentrates instead on a more personal use case: <strong>developing and deploying standalone applications to CouchDB instances around the web.</strong> There are apps you can build with server-side components that you can’t build with just CouchApp. But by the same token, there are apps you can build on CouchApp alone that you can’t build any other way.</p>
<h2 id="installation">Installation</h2>
<pre><code>sudo gem install couchapp</code></pre>
<p>If this gives you trouble, see the INSTALLING file for more options.</p>
<h2 id="begin-here">Begin Here</h2>
<p>Once you run <code>couchapp generate relax &amp;&amp; cd relax</code>, you’re ready to get started. Views are found in the <code>views</code> directory, attachments are stored in the <code>_attachments</code> directory, forms are stored in <code>forms</code>, and the generation script drops some more files in with additional information about how you can build <code>_design/</code> docs using your text editor.</p>
<h2 id="usage">Usage</h2>
<p>To upload your application to a CouchDB database, run this command from within you application directory.</p>
<pre><code>couchapp push . mydb</code></pre>
<p>You can expand <code>mydb</code> to be as complex as <code>http://login:password@my.couchapp.com:5984/mydb</code> if you need to.</p>
<p>CouchApp provides some neat helpers for getting code into your view and render functions. Look in the view files created by a generated app to see the usage for the <code>!code</code> and <code>!json</code> preprocessor macros. They are basically just two different ways to get more code into your functions.</p>
<h3 id="code">!code</h3>
<p>The <code>!code path.to.code</code> macro inserts the string value found at <code>path.to.code</code> of the design document, into the current file, at the position of the macro. Here’s an example:</p>
<pre><code>function(doc) {
  // !code lib.parser.html
  var parsed = new parseHTML(doc.html);
  emit(doc.key, parsed);
}</code></pre>
<p>When you run <code>couchapp push</code> the <code>!code</code> line will be replaced with the contents of the file found at <code>lib/parser/html.js</code>. Simple as that.</p>
<h4 id="standard-library">Standard Library</h4>
<p>As we begin to see more apps built using CouchApp, we plan to include helpful functions in the standard library (as supplied by <code>couchapp generate</code>). Thank you for helping us expand this section! :)</p>
<h3 id="json">!json</h3>
<p>After all the <code>!code</code> includes have been processed (insuring that they may also use the <code>!json</code> macro), <code>couchapp push</code> does another pass through the function, running the <code>!json path.to.json</code> macro. This accumulates the data found at <code>path.to.json</code> into a single object for inclusion. After all the <code>!json</code> macros have been processed, the accumlated object is serialized to json and stored in a variable with a name corresponding to the path root.</p>
<p>Here’s an example. It’s a lot of code to look at, but the principles are simple. Also, if you think you can explain it better than I have, please send a patch.</p>
<h4 id="a-subset-of-the-design-doc-fields-for-context">A Subset of the Design Doc Fields (for context)</h4>
</body>
</html>
