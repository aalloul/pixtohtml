<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>agl_curve25519-donna1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="curve25519-donna">curve25519-donna</h1>
<p><em>Note</em>: this code is from 2008. Since that time, many more, great implementations of curve25519 have been written, including several amd64 assembly versions by djb. You are probably better served now by .</p>
<p>. The original qhasm source isn’t available, only the x86 32-bit assembly output.</p>
<p>Since many x86 systems are now 64-bit, and portability is important, this project provides alternative implementations for other platforms.</p>
<table>
<thead>
<tr class="header">
<th>Implementation</th>
<th>Platform</th>
<th>Author</th>
<th>32-bit speed</th>
<th>64-bit speed</th>
<th>Constant Time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>curve25519</td>
<td>x86 32-bit</td>
<td>djb</td>
<td>265µs</td>
<td>N/A</td>
<td>yes</td>
</tr>
<tr class="even">
<td>curve25519-donna-c64</td>
<td>64-bit C</td>
<td>agl</td>
<td>N/A</td>
<td>215µs</td>
<td>yes</td>
</tr>
<tr class="odd">
<td>curve25591-donna</td>
<td>Portable C</td>
<td>agl</td>
<td>2179µs</td>
<td>610µs</td>
<td></td>
</tr>
</tbody>
</table>
<p>(All tests run on a 2.33GHz Intel Core2)</p>
<h2 id="usage">Usage</h2>
<p>The usage is exactly the same as djb’s code (as described at http://cr.yp.to/ecdh.html) except that the function is called <code>curve25519\_donna</code>.</p>
<p>To generate a private key, generate 32 random bytes and:</p>
<pre><code>mysecret[0] &amp;= 248;
mysecret[31] &amp;= 127;
mysecret[31] |= 64;</code></pre>
<p>To generate the public key, just do:</p>
<pre><code>static const uint8_t basepoint[32] = {9};
curve25519_donna(mypublic, mysecret, basepoint);</code></pre>
<p>To generate a shared key do:</p>
<pre><code>uint8_t shared_key[32];
curve25519_donna(shared_key, mysecret, theirpublic);</code></pre>
<p>And hash the <code>shared\_key</code> with a cryptographic hash function before using.</p>
<p>For more information, see .</p>
<h2 id="building">Building</h2>
<p>If you run <code>make</code>, two .a archives will be built, similar to djb’s curve25519 code. Alternatively, read on:</p>
</body>
</html>
