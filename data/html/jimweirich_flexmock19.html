<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jimweirich_flexmock19</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>dog.bark(5)
dog.bark(6)

assert_spy_called dog, :wag, :tail
assert_spy_called dog, :wag, :head
assert_spy_called dog, {times: 2}, :wag

assert_spy_not_called dog, :bark
assert_spy_not_called dog, {times: 3}, :wag

is_even = proc { |n| assert_equal 0, n%2 }
assert_spy_called dog, { and: is_even, on: 2 }, :bark, Integer</code></pre>
<p>```</p>
<h4 id="rspec-matcher-for-spying">RSpec Matcher for Spying</h4>
<p>FlexMock also provides an RSpec matcher that can be used to specify spy behavior.</p>
<ul>
<li><p><b>mock.should have_received(<em>method_name</em>).<em>modifier1</em>.<em>modifier2</em>…</b></p>
<p>Specifies that the method named <em>method_name</em> should have been received by the mock object with the given arguments.</p>
<p>Just like <code>should_receive</code>, <code>have_received</code> will accept a number of modifiers that modify its behavior.</p></li>
</ul>
<p><em>Modifiers for <code>have_received</code></em></p>
<ul>
<li><p><b>with(<em>args</em>)</p>
<p>If a <code>with</code> modifier is given, only messages with matching arguments are considered. <em>args</em> can be any of the argument matches mentioned in the “Argument Validation” section above. If <code>with</code> is not given, then the arguments are not considered when finding matching calls.</p></li>
<li><p><b>times(<em>n</em>)</b></p>
<p>If a <code>times</code> modifier is given, then there must be exactly <code>n</code> calls for that method name on the mock. If the <code>times</code> clause is not given, then there must be at least one call matching the method name (and arguments if they are considered).</p>
<ul>
<li><code>never</code> is an alias for <code>times(0)</code>,</li>
<li><code>once</code> is an alias for <code>times(1)</code>, and</li>
<li><code>twice</code> is an alias for <code>times(2)</code>.</li>
</ul></li>
<li><p><b>and { |args| <em>code</em> }</b></p>
<p>If an <code>and</code> modifier is given, then the supplied block will be run as</p></li>
</ul>
</body>
</html>
