<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>csiszarattila_zipcodematch1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="mire-használható-ez-a-plugin">Mire használható ez a plugin?</h1>
<p>A ZipcodeMatch egy, a magyarországi irányítószámok és települések egyezőségét ellenőrző plugin. Valójában ennél többre is képes, mivel adatbázisa tartalmazza minden magyarországi település és a hozzá tartozó irányítószámot vagy irányítószámokat így kiválóan felhasználható űrlapok adatbevitelének az ellenőrzésére vagy segítésére.</p>
<p>A kiegészítő egy melléktermékeként jött létre.</p>
<h1 id="telepítés">Telepítés</h1>
<h2 id="plugin-telepítése">Plugin telepítése</h2>
<p>Egyszerűen parancssorból kiadva az alkalmazás könyvtárában:</p>
<pre><code>script/plugin install git://github.com/csiszarattila/zipcodematch.git</code></pre>
<h2 id="adatok-importálása">Adatok importálása</h2>
<p>Az egyszerűbb használat érdekében a kiterjesztés az adatokat adatbázisban tárolja, az adatbázist pedig egy Zipcode nevű ActiveRecord típusú modellen keresztül éri el. A modell használatához így egy migrációval előbb létre kell hozni a szükséges zipcodes elnevezésű táblát, ezt a plugin generátorával könnyen megteheted:</p>
<pre><code>script/generate zipcodes table</code></pre>
<p>Majd töltsük fel a létrehozott sémát:</p>
<pre><code>rake db:migrate</code></pre>
<p>Majd az adatok beimportálásához az adatbázis táblába futtasd:</p>
<pre><code>rake db:zipcodes:load</code></pre>
<p>(Légy türelemmel, ez a művelet eltarthat egy ideig.)</p>
<h1 id="példák">Példák</h1>
<p>Az ellenőrzésre a <strong>ZipcodeMatch.match?(település,irányítószám)</strong> használhatjuk, amely eldönti, hogy a megadott település és irányítószám összetartozik-e (figyelembe veszi, hogy egyes városok több irányítószámmal is rendelkezhetnek).</p>
<p>Érdemes alacsony szintű ellenőrzésként alkalmazni egy modellben:</p>
<pre><code>  def validate
    unless ZipcodeMatch::match?(self.city, self.zipcode)
        errors.add_to_base ...
    end
  end</code></pre>
<p>vagy használd a magasabb szintű validációk egyikét:</p>
<pre><code>  class Address &lt; ActiveRecord::Base
    ...
    validates_zipcode_and_city_match
    ...</code></pre>
</body>
</html>
