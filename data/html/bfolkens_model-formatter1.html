<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>bfolkens_model-formatter1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h2 id="overview">Overview</h2>
<p>The ModelFormatter module allows you to easily handle fields that need to be formatted or stripped of formatting as they are set or retrieved from the database. You can designate one or more of your columns as “formatted columns” like in this example:</p>
<pre><code>class Widget &lt; ActiveRecord::Base
  # Set an integer field as a symbol
  format_column :some_integer, :as =&gt; :integer

  # Specify the type as a class
  format_column :sales_tax, :as =&gt; Formatters::FormatCurrency
  format_column :sales_tax, :as =&gt; Formatters::FormatCurrency.new(:precision =&gt; 4)

  # Change the prefix of the generated methods and specify type as a symbol
  format_column :sales_tax, :prefix =&gt; &#39;fmt_&#39;, :as =&gt; :currency, :options =&gt; {:precision =&gt; 4}

  # Use specific procedures to convert the data +from+ and +to+ the target
  format_column :area, :from =&gt; Proc.new {|value, options| number_with_delimiter sprintf(&#39;%2d&#39;, value)},
                       :to =&gt; Proc.new {|str, options| str.gsub(/,/, &#39;&#39;)}

  # Use a block to define the formatter methods
  format_column :sales_tax do
    def from(value, options = {})
      number_to_currency value
    end
    def to(str, options = {})
      str.gsub(/[\$,]/, &#39;&#39;)
    end
  end

  ...
end</code></pre>
<p>The methods of this module are automatically included into <code>ActiveRecord::Base</code> as class methods, so that you can use them in your models.</p>
<h2 id="documentation">Documentation</h2>
<p>For more detailed documentation, create the rdocs with the following command:</p>
<pre><code>rake rdoc</code></pre>
<h2 id="running-unit-tests">Running Unit Tests</h2>
<p>By default, the ModelFormatter plugin uses the mysql +test+ database, running on +localhost+. To run the tests, enter the following:</p>
<pre><code>rake</code></pre>
</body>
</html>
