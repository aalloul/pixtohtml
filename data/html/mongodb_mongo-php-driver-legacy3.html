<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>mongodb_mongo-php-driver-legacy3</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h2 id="testing">Testing</h2>
<p>The tests are not available as part of the PECL package, but they are available on .</p>
<p>See <a href="CONTRIBUTING.md" class="uri">CONTRIBUTING.md</a> for how to run and create new tests.</p>
<h2 id="full-debug-log">Full debug log</h2>
<p>You can make a full debug log by using the following code:</p>
<p>```php &lt;?php /<em> </em> This script will catch all internal driver logging for MongoDB and log them * to a file /tmp/MONGO-PHP-LOG.<unix-timestamp>. This log will give the * driver developers more or less all the information they’ll need to debug * this issue */</p>
<p>function module2string(<span class="math inline">$module) {  switch ($</span>module) { case MongoLog::RS: return “REPLSET”; case MongoLog::CON: return “CON”; case MongoLog::IO: return “IO”; case MongoLog::SERVER: return “SERVER”; case MongoLog::PARSE: return “PARSE”; default: return $module; } }</p>
<p>function level2string(<span class="math inline">$level) {  switch ($</span>level) { case MongoLog::WARNING: return “WARN”; case MongoLog::INFO: return “INFO”; case MongoLog::FINE: return “FINE”; default: return $level; } }</p>
<p>function logMongo($module, $level, $message, $save = false) { static $log = “”; <span class="math inline">$log .= sprintf(&quot;%s | %s (%s): %s\n&quot;, date('Y-m-d H:i:s',time()), module2string($</span>module), level2string($level), $message);</p>
<pre><code>if ($save) {
    file_put_contents(&quot;/tmp/MONGO-PHP-LOG.&quot; . time(), $log);</code></pre>
</body>
</html>
