<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>kovyrin_magic-enum2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<ul>
<li><code>:enum</code> — string with name of the ENUM hash;</li>
<li><code>:named_scopes</code> — whether to generate named scopes for values of ENUM (pluralized key names). In addition to per-key named scope, <code>of_name</code> scope will be generated, which accepts a symbol corresponding to ENUM value.</li>
</ul>
<p>Look the following example:</p>
<pre><code>STATUSES = {
  :unknown   =&gt; 0,
  :draft     =&gt; 1,
  :published =&gt; 2,
  :approved  =&gt; 3,
}
define_enum :status, :default =&gt; 1, :raise_on_invalid =&gt; true, :simple_accessors =&gt; true</code></pre>
<p>This example is identical to:</p>
<pre><code>STATUSES = {
  :unknown   =&gt; 0,
  :draft     =&gt; 1,
  :published =&gt; 2,
  :approved  =&gt; 3,
}
STATUSES_INVERTED = STATUSES.invert

def self.status_value(status)
  STATUSES[status]
end

def self.status_by_value(value)
  STATUSES_INVERTED[value]
end

def status
  self.class.status_by_value(self[:status]) || self.class.status_by_value(1)
end

def status=(value)
  raise ArgumentError, &quot;Invalid value \&quot;#{value}\&quot; for :status attribute of the #{self.class} model&quot; unless STATUSES.key?(value)
  self[:status] = STATUSES[value]
end

def unknown?
  status == :unknown
end

def draft?
  status == :draft
end

def published?
  status == :published</code></pre>
</body>
</html>
