<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>georgi_kontrol2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<ul>
<li><strong>cookies</strong>: shortcut to request.cookies</li>
<li><strong>session</strong>: shortcut to <code>request.env['rack.session']</code></li>
<li><strong>redirect(path)</strong>: renders a redirect response to specified path</li>
<li><strong>render(file, variables)</strong>: render a template with specified variables</li>
<li><strong>text(string)</strong>: render a string</li>
</ul>
<h2 id="routing">Routing</h2>
<p>Routing is just as simple as using regular expressions with groups. Each group will be provided as argument to the block.</p>
<p>Create a file named <code>routing.ru</code>:</p>
<pre><code>require &#39;kontrol&#39;

class Routing &lt; Kontrol::Application
  map do
    pages &#39;/pages/(.*)&#39; do |name|
      text &quot;The path is #{ pages_path name }! &quot;
    end
 
    archive &#39;/(\d*)/(\d*)&#39; do |year, month|
      text &quot;The path is #{ archive_path year, month }! &quot;
    end
  end
end

run Routing.new</code></pre>
<p>Now run this application:</p>
<pre><code>rackup routing.ru</code></pre>
<p>You will now see, how regex groups and parameters are related. For example if you browse to <code>localhost:9292/2008/12</code>, the app will display <code>The path is /2008/12</code>.</p>
<p>The inverse operation to route recognition is route generation. That means a route with one or more groups can generate a url, which will be recognized this very route.</p>
<p>For example the route <code>/page/(.*)</code> named page will recognize the path <code>/page/about</code>, which can be generated by using <code>page_path('about')</code>.</p>
<h2 id="templates">Templates</h2>
<p>Rendering templates is as simple as calling a template file with some parameters, which are accessible inside the template as instance</p>
</body>
</html>
