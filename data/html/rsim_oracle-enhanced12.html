<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>rsim_oracle-enhanced12</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>For backward compatibility reasons it is possible to use <code>:default</code> option in the <code>create_table</code> instead of <code>:as</code> option. But this is deprecated and may be removed in the future version.</p>
<h3 id="oracle-specific-schema-statements-and-data-types">Oracle specific schema statements and data types</h3>
<p>There are several additional schema statements and data types available that you can use in database migrations:</p>
<ul>
<li><code>add_foreign_key</code> and <code>remove_foreign_key</code> for foreign key definition (and they are also dumped in <code>db/schema.rb</code>)</li>
<li><code>add_synonym</code> and <code>remove_synonym</code> for synonym definition (and they are also dumped in <code>db/schema.rb</code>)</li>
<li>You can create table with primary key trigger using <code>:primary_key_trigger =&gt; true</code> option for <code>create_table</code></li>
<li>You can define columns with <code>raw</code> type which maps to Oracle’s <code>RAW</code> type</li>
<li>You can add table and column comments with <code>:comment</code> option</li>
<li>Default tablespaces can be specified for tables, indexes, clobs and blobs, for example:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="dt">ActiveRecord</span>::<span class="dt">ConnectionAdapters</span>::<span class="dt">OracleEnhancedAdapter</span>.default_tablespaces =</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  {<span class="st">:clob</span> =&gt; <span class="st">&#39;TS_LOB&#39;</span>, <span class="st">:blob</span> =&gt; <span class="st">&#39;TS_LOB&#39;</span>, <span class="st">:index</span> =&gt; <span class="st">&#39;TS_INDEX&#39;</span>, <span class="st">:table</span> =&gt; <span class="st">&#39;TS_DATA&#39;</span>}</a></code></pre></div>
<h3 id="switching-to-another-schema">Switching to another schema</h3>
<p>There are some requirements to connect to Oracle database first and switch to another user. Oracle enhanced adapter supports schema: option.</p>
<p>Note: Oracle enhanced adapter does not take care if the database user specified in username: parameter has appropriate privilege to select, insert, update and delete database objects owned by the schema specified in schema: parameter.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yml"><code class="sourceCode yaml"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="fu">development:</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="fu">adapter:</span><span class="at"> oracle_enhanced</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="fu">database:</span><span class="at"> xe</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="fu">username:</span><span class="at"> user</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="fu">password:</span><span class="at"> secret</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="fu">schema:</span><span class="at"> tableowner</span></a></code></pre></div>
<h3 id="timeouts">Timeouts</h3>
<p>By default, OCI libraries set a connect timeout of 60 seconds (as of v12.0), and do not set a data receive timeout.</p>
<p>While this may desirable if you process queries that take several minutes to complete, it may also lead to resource exhaustion if connections are teared down improperly during a query, e.g. by misbehaving networking equipment that does not inform both peers of connection reset. In this scenario, the OCI libraries will wait indefinitely for data to arrive, thus blocking indefinitely the application that initiated the query.</p>
<p>You can set a connect timeout, in seconds, using the following TNSNAMES parameters:</p>
<ul>
<li><code>CONNECT_TIMEOUT</code></li>
<li><code>TCP_CONNECT_TIMEOUT</code></li>
</ul>
</body>
</html>
