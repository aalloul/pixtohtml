<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>svetlyak40wt_django-pingback2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code># create simple function which returns Post object and accepts
# exactly same arguments as &#39;details&#39; view.
def pingback_blog_handler(slug, **kwargs):
    return Post.objects.get(slug=slug)

# define association between view name and our handler
ping_details = {&#39;post_detail&#39;: pingback_blog_handler}

# create xml rpc method, which will process all
# ping requests
ping_func = create_ping_func(**ping_details)

# register this method in the dispatcher
xmlrpcdispatcher.register_function(ping_func, &#39;pingback.ping&#39;)</code></pre>
<p>Now, go at you http://mysweetsite.com/xmlrpc/ and you should see <code>pingback.ping</code> method among few other system methods. If it is not there, then you made mistake in you server setup.</p>
<p>Also, you need to tell other sites, that your blog accepts pingbacks. You can do it by adding a link in the head of your site:</p>
<pre><code>&lt;link rel=&quot;pingback&quot; href=&quot;{% url &#39;xmlrpc&#39; %}&quot; /&gt;</code></pre>
<p>Or by adding X-Pingback HTTP header. Do do this, just add such line in the settings.py:</p>
<pre><code>MIDDLEWARE_CLASSES = [
    # ...
    &#39;pingback.middleware.XPingMiddleware&#39;,
]</code></pre>
<h2 id="connecting-client-signals">Connecting client signals</h2>
<p>Let’s suppose, that you have a blog and want to ping external sites (like Technorati) on post save, and to receive pingbacks from other sites. Next two sections contain simple ‘how-to’ enable these features.</p>
<p>At first, setup configuration in the settings, here is an example:</p>
<pre><code>DIRECTORY_URLS = (
    &#39;http://ping.blogs.yandex.ru/RPC2&#39;,
    &#39;http://rpc.technorati.com/rpc/ping&#39;,
)</code></pre>
<p>Next, you must connect some signals to ping workers, which created using <code>ping_external_links</code> and <code>ping_directories</code> functions:</p>
</body>
</html>
