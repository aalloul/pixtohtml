<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>duritong_puppet-munin2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<ol start="3" type="1">
<li>In the node definition in your site.pp for your main munin host, add the following:</li>
</ol>
<h3 id="local-plugins">Local plugins</h3>
<p>If there are particular munin plugins you want to enable or configure, you define them in the node definition, like follows:</p>
<pre><code>  # Enable monitoring of disk stats in bytes
  munin::plugin { &#39;df_abs&#39;: }

  # Use a non-standard plugin path to use custom plugins
  munin::plugin { &#39;spamassassin&#39;:
    ensure         =&gt; present,
    script_path_in =&gt; &#39;/usr/local/share/munin-plugins&#39;,
  }

  # For wildcard plugins (eg. ip_, snmp_, etc.), use the name variable to
  # configure the plugin name, and the ensure parameter to indicate the base
  # plugin name to which you want a symlink, for example:
  munin::plugin { [ &#39;ip_192.168.0.1&#39;, &#39;ip_10.0.0.1&#39; ]:
    ensure =&gt; &#39;ip_&#39;
  }

  # Use a special config to pass parameters to the plugin
  munin::plugin {
    [ &#39;apache_accesses&#39;, &#39;apache_processes&#39;, &#39;apache_volume&#39; ]:
       ensure =&gt; present,
       config =&gt; &#39;env.url http://127.0.0.1:80/server-status?auto&#39;
  }</code></pre>
<p>Note: The plugin must be installed at the client. For listing available plugins run as root <code>munin-node-configure --suggest</code></p>
<h3 id="external-plugins">External plugins</h3>
<p>For deploying plugins which are not available at client, you can fetch them from puppet master using <code>munin::plugin::deploy</code>.</p>
<pre><code>  munin::plugin::deploy { &#39;redis&#39;:
      source =&gt; &#39;munin/plugins/redis/redis_&#39;,
      config =&gt; &#39;&#39;   # pass parameters to plugin
  }</code></pre>
<p>In this example the file on master would be located in:</p>
<pre><code> {modulepath}/munin/files/plugins/redis/redis_
 </code></pre>
<p>Module path is specified in <code>puppet.conf</code>, you can find out your <code>{modulepath}</code> easily by tying in console <code>puppet config print modulepath</code>.</p>
</body>
</html>
