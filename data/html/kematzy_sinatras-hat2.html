<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>kematzy_sinatras-hat2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>“Nested mounted models?” you ask?</p>
<h2 id="nested-mounted-models.">Nested mounted models.</h2>
<p>You don’t want to have to expose your entire application at the top level of URL paths. That wouldn’t be very RESTful, and more importantly, it’d be damn ugly. So Sinatra’s Hat allows you to nest resources:</p>
<pre>
mount Article do
  mount Comment
end
</pre>
<p>With this example, you’d get <code>/articles/1/comments</code>, <code>/articles/1/comments/1</code> and all the rest of the actions you get for articles, just nested. As long as your <code>Article</code> model supports a <code>comments</code> association proxy, then the <code>finder</code> and <code>record</code> options for <code>Comment</code> will automatically scope their results by the parent <code>Article</code>.</p>
<h2 id="limiting-routes">Limiting routes</h2>
<p>By default, Sinatra’s Hat creates seven routes for each mounted model (the four ones for <acronym title="Create|Read|Update|Destroy">CRUD</acronym> actions plus the routes for index, new and edit action), but you can reduce the number of available routes with <code>only</code>:</p>
<pre>
mount Article do
  only :index, :show
end
</pre>
<p>Only the listed actions will return valid responses; requests for the “missing” routes will produce 404 “Not Found” HTTP responses.</p>
<h2 id="basic-auth">Basic Auth</h2>
<p>To protect actions using basic authentication, you can use the <code>protect</code> method.</p>
<pre>
mount Article do
  protect :create, :update, :destroy, :username => "foo", :password => "bar", :realm => "BLOGZ"
end
</pre>
<p>The above snippet will protect your <acronym title="Create|Update|Destroy">CUD</acronym> actions with basic auth, using the username “foo” and password “bar”. The realm for the basic auth prompt will say “BLOGZ”.</p>
</body>
</html>
