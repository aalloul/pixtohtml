<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>chrisa_ruby-dtrace1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>ruby-dtrace-consumer is Ruby bindings for libdtrace, which allows you to write D-based programs with Ruby, accessing traced data in Ruby.</p>
<p>The corresponding provider library, allowing you to create probes meaningful to your Ruby programs, may be found as “ruby-usdt”.</p>
<p>“ruby-dtrace”, the predecessor to both these gems, is now deprecated and will not be updated.</p>
<p>== FEEDBACK</p>
<p>Fork the repository on Github: http://github.com/chrisa/ruby-dtrace</p>
<p>== FEATURES</p>
<ul>
<li>Access to the D API</li>
<li>Probe metadata</li>
<li>Run D programs</li>
<li>Access aggregates</li>
<li>Consume output from D programs</li>
</ul>
<p>== SYNOPSIS</p>
<pre><code>require &#39;dtrace&#39;

t = DTrace.new 
progtext = &#39;ruby$1:::function-entry{ @a[strjoin(strjoin(copyinstr(arg0),&quot;.&quot;),copyinstr(arg1))] = count(); } END { printa(@a); }&#39;
prog = t.compile progtext
prog.execute

t.go

[...]

c = DTraceConsumer.new(t)
c.consume_once do |rec|
  # handle records
end</code></pre>
<p>== REQUIREMENTS</p>
<ul>
<li><p>For the consumer API, platform with DTrace support (Solaris and Illumos-derived systems, Mac OS X 10.5+, FreeBSD).</p></li>
<li><p>root, or some/all of the dtrace privileges on Solaris: dtrace_user, dtrace_proc and dtrace_kernel.</p></li>
</ul>
<p>== INSTALL</p>
<p>$ sudo gem install ruby-dtrace-consumer</p>
</body>
</html>
