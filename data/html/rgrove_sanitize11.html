<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>rgrove_sanitize11</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<ul>
<li><p><strong>:is_whitelisted</strong> - <code>true</code> if the current node has been whitelisted by a previous transformer, <code>false</code> otherwise. It’s generally bad form to remove a node that a previous transformer has whitelisted.</p></li>
<li><p><strong>:node</strong> - A <code>Nokogiri::XML::Node</code> object representing an HTML node. The node may be an element, a text node, a comment, a CDATA node, or a document fragment. Use Nokogiri’s inspection methods (<code>element?</code>, <code>text?</code>, etc.) to selectively ignore node types you aren’t interested in.</p></li>
<li><p><strong>:node_name</strong> - The name of the current HTML node, always lowercase (e.g. “div” or “span”). For non-element nodes, the name will be something like “text”, “comment”, “#cdata-section”, “#document-fragment”, etc.</p></li>
<li><p><strong>:node_whitelist</strong> - Set of <code>Nokogiri::XML::Node</code> objects in the current document that have been whitelisted by previous transformers, if any. It’s generally bad form to remove a node that a previous transformer has whitelisted.</p></li>
</ul>
<h3 id="output">Output</h3>
<p>A transformer doesn’t have to return anything, but may optionally return a Hash, which may contain the following items:</p>
<ul>
<li><strong>:node_whitelist</strong> - Array or Set of specific Nokogiri::XML::Node objects to add to the document’s whitelist, bypassing the current Sanitize config. These specific nodes and all their attributes will be whitelisted, but their children will not be.</li>
</ul>
<p>If a transformer returns anything other than a Hash, the return value will be ignored.</p>
<h3 id="processing">Processing</h3>
<p>Each transformer has full access to the <code>Nokogiri::XML::Node</code> that’s passed into it and to the rest of the document via the node’s <code>document()</code> method. Any changes made to the current node or to the document will be reflected instantly in the document and passed on to subsequently called transformers and to Sanitize itself. A transformer may even call Sanitize internally to perform custom sanitization if needed.</p>
<p>Nodes are passed into transformers in the order in which they’re traversed. Sanitize performs top-down traversal, meaning that nodes are traversed in the same order you’d read them in the HTML, starting at the top node, then its first child, and so on.</p>
```ruby html = %[
<header>
<p><span> <strong>foo</strong></p>
</body>
</html>
