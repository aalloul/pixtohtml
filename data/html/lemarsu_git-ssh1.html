<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>lemarsu_git-ssh1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="git-ssh">git-ssh</h1>
<p><code>git-ssh</code> is a proxy to serve git repositories over ssh.</p>
<h1 id="description">DESCRIPTION</h1>
<p><code>git-ssh</code> can force your ssh server to handle only git requests. You can allow your users to pull or push, but not to login or to do scp or sftp.</p>
<h1 id="features">FEATURES</h1>
<ul>
<li>No other account creation to handle a new commiter.</li>
<li>Can chroot to a directory to limit access of the repository server.</li>
</ul>
<p>Later :</p>
<ul>
<li>Can allow read, write or none access to a repository on a user basis.</li>
</ul>
<h1 id="synopsis">SYNOPSIS</h1>
<p>Create a git user account</p>
<pre><code># groupadd git
# useradd -g git -h /var/git -m git
# passwd</code></pre>
<p>You need to put a strong password that you can immediately forget.</p>
<p>Prepare for ssh keys</p>
<pre><code># mkdir ~git/.ssh
# touch ~git/.ssh/authorized_keys
# chown -R git:git ~git/.ssh
# chmod 700 ~git/.ssh</code></pre>
<p>When you have to add a key in the <code>~git/.ssh/authorized_keys</code>, simply add at the beginning of the line :</p>
<pre><code>command=&quot;/usr/bin/git-ssh -r /var/git lemarsu&quot;</code></pre>
<p>For example:</p>
<pre><code>command=&quot;/usr/bin/git-ssh -r /var/git lemarsu&quot; ssh-dss [...] lemarsu@zorglub</code></pre>
<p>The <code>-r</code> option ask <code>git-ssh</code> to chroot the folder <code>/var/git</code>. This way, the users cannot get away from the directory of repositories.</p>
</body>
</html>
