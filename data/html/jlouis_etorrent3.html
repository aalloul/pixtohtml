<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>jlouis_etorrent3</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>  The shell should respond with `ok`. If you get an error then your openssl libraries are still missing.</code></pre>
<ol start="4" type="1">
<li>Open up a git bash shell and cd to a directory you want to work in.</li>
<li>Clone the rebar repository <code>git clone https://github.com/basho/rebar.git</code></li>
<li><p>From a regular cmd.exe shell <code>cd rebar</code>. Now if you added the erlang bin directory to your PATH then you can simply run <code>bootstrap.bat</code>. If you didn’t add Erlang’s bin to your path then issue the following command:</p>
<p><code>&quot;C:\Program Files\erl5.8.2\bin\escript.exe&quot; bootstrap</code></p>
Adjust the path to your Erlang installation directory. From now on, use this invocation for escript.exe and erl.exe. I’ll assume it’s on PATH. You should now have a <code>rebar</code> file created. If you have Erlangs bin dir on your PATH then you may want to also add the rebar directory to your PATH. This will allow you to use the rebar.bat script which will also reduce the amount of typing you will have to do.</li>
<li>Clone etorrent and copy the <code>rebar</code> file into it (unless you have it on path).</li>
<li><p>Now, we need to satisfy the dependencies. This should be done by rebar itself but I couldn’t get it to work correctly with git. This point describes how to do it manually.</p>
<p><code>mkdir deps</code> # this is where rebar will look for etorrent dependencies</p>
<p><code>escript.exe rebar check-deps</code> # this will give you a list of the missing dependencies and their git repos.</p>
<p>For each dependency reported by check-deps perform the following command in a git bash shell (be sure to be in the etorrent directory)</p>
<p><code>git clone git://path_to_repo/name.git deps/name</code></p>
<p>Be sure to run <code>escript.exe rebar check-deps</code> after cloning each additional repo as new dependencies might be added by them.</p>
<p>For the time of this writing (2011-02-13) I had to clone the following repositories:</p>
<p><code>git clone git://github.com/esl/gproc.git deps/gproc</code></p>
<p><code>git clone git://github.com/esl/edown.git deps/edown</code></p>
<code>git clone git://github.com/basho/riak_err.git deps/riak_err</code></li>
<li><code>escript.exe rebar compile</code> to compile the application from a cmd.exe prompt.</li>
<li><code>escript.exe rebar generate</code> this creates an embedded release in <em>rel/etorrent</em> which can subsequently be moved to a location at your leisure. This command may take some time so be patient.</li>
<li>Edit <code>rel/etorrent/etc/app.config</code> - there are a number of directories which must be set in order to make the system work. Be sure each directory exists before starting etorrent. You also have to change all paths starting with <code>/</code> (ie. <code>/var/lib...</code>). When setting paths use forward slashes. For example <code>{dir, &quot;D:/etorrent/torrents&quot;},</code>.</li>
<li>Check <code>rel/etorrent/etc/vm.args</code> - Erlang args to supply</li>
<li>Be sure to protect the erlang cookie or anybody can connect to your erlang system! See the Erlang user manual in</li>
<li><p>We can’t run the etorrent script because it’s written in bash. So in order to start ettorent cd from a cmd.exe shell into the <code>rel\etorrent</code> directory. And perform the following command</p>
<p><code>erts-5.8.2\bin\erl.exe -boot release\1.2.1\etorrent -embedded -config etc\app.config -args_file etc\vm.args</code></p>
Be sure to substitute the version number in the release path to the current etorrent release version. Do the same for the erts version. Allow port communication when/if the Windows firewall asks for it.</li>
<li>drop a .torrent file in the watched dir and see what happens.</li>
<li><p>call <code>etorrent:help()</code>. from the Erlang CLI to get a list of available commands.</p></li>
</ol>
</body>
</html>
