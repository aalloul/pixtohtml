<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>mwlang_elemental5</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>&lt;p&gt;&lt;label for=&quot;account_status&quot;&gt;Account Status&lt;/label&gt;&lt;br/&gt;
    &lt;%= select &quot;user&quot;, &quot;status&quot;,
        AccountStatus.sort.map{|a| [a.display, a.value]},
        {   :include_blank =&gt; false,
            :selected =&gt; AccountStatus.defaults.first.value }
    %&gt;&lt;/select&gt;
&lt;/p&gt;</code></pre>
<p>Or render checkboxes with:</p>
<pre><code>&lt;% Color.sort.each |c| do %&gt;
    &lt;%= check_box_tag(&quot;user[favorite_colors][#{c.value}]&quot;,
        &quot;1&quot;, Color.defaults.detect{|color| color == c}) %&gt;
    &lt;%= &quot;#{c.display}&quot;%&gt;&lt;br /&gt;
&lt;% end %&gt;</code></pre>
<p>Life is simplified because: * No more migrate scripts for tiny tables * No worries that the auto-incrementer is guaranteeing to assign same ID accross deployments. * No database penalties looking up rarely changing values * No worries that an empty lookup table breaks your application logic/flow * Values that mean something in your app are symbolic while what’s displayed and sorted on are free to change as the application grows and evolves.</p>
<p>More than one default is supported (dropdowns only use one, so first.value gets you first one, radio buttons or checkboxes can use all defaults). Ordinal position is preserved and traditionally shouldn’t be changed during the life of the project, although, Ruby being Ruby and developers saying “Ruby ain’t C,” an Elemental’s elements almost definitely will get changed by some developer at some time.</p>
<p>The chances of the name of the symbol changing is much lower than a developer’s tendency to keep an orderly house by sorting member elements alphabetically. As such, the default behavior for “value” is to return the symbol rather than ordinal value and storing as a string in DB, which seems the safest route to take albeit not the optimal performance-wise (finding records by integral value is faster than string searches, even with indexes in place). If you want to override this, simply call “persist_ordinally” when you declare your Elemental classes.</p>
<pre><code>class Color
    extend Elemental
    persist_ordinally
    member :red
    member :green
    member :blue
end</code></pre>
</body>
</html>
