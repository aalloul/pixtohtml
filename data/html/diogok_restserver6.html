<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>diogok_restserver6</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>class MyController implements \Rest\Controller {
    public function execute(\Rest\Server $rest) {
        // your logic here
        return $rest;
    }
}</code></pre>
<p>The execute method (or any other method to be used in restserver) will receive the RestServer object and must return the same restserver, to end the request, or another action(controller or view) to forward the request control to.</p>
<pre><code>class MyController implements \Rest\Controller {
    public function execute(\Rest\Server $rest) {
        $rest-&gt;getResponse()-&gt;setResponse(&quot;Hello, world!&quot;);
        return $rest;
    }

    public function other(\Rest\Server $rest) {
        return new MyView();
    }
}</code></pre>
<h4 id="defaults">Defaults</h4>
<p>The package comes with a few controller and a view implementation for generic usage, as follow:</p>
<pre><code>new \Rest\Controller\BadRequest;
new \Rest\Controller\Created;
new \Rest\Controller\Fobidden;
new \Rest\Controller\InternalServerError;
new \Rest\Controller\MethodNotAllowed;
new \Rest\Controller\MovedPermanently($newLocation);
new \Rest\Controller\NotAcceptable;
new \Rest\Controller\NotAuthorized;
new \Rest\Controller\NotFound;
new \Rest\Controller\NotModified;
new \Rest\Controller\Redirect($location);

new \Rest\View\Generic($template_path,$data);
new \Rest\View\JSon($data);</code></pre>
<p>Lot’s of these controllers are used automatically, like NotFound, MethodNotAllowed and a few others.</p>
<h4 id="anonymous-functions">Anonymous functions</h4>
<p>The server can also use anonymous functions to deal with the resources, work the same way as the execute method of a generic controller (that’s is what happens).</p>
<pre><code>$rest-&gt;addMap(&quot;GET&quot;,&quot;/users&quot;,function($rest) {
        // your logic
        return $rest; // or return new \Rest\View\JSON($data) for example
        });</code></pre>
</body>
</html>
