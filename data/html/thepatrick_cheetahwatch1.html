<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>thepatrick_cheetahwatch1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="cheetahwatch-readme">CheetahWatch README</h1>
<p>This file shortly explains the purpose and function of all classes used in CheetahWatch</p>
<h2 id="how-to-add-new-devices">How to add new devices</h2>
<p>In order to add new devices (other Huawei modems should work with the following changes only, while modems from other manufacturers may or may not need code changes, too), follow these instructions:</p>
<ol type="1">
<li>Add a record to devices.plist - best copy an existing one and adapt the value of the keys idProduct and idVendor. The values (in hex) are displayed Apple System Profiler. For non USB devices, the key IOProviderClass needs to be adapted and different matching keys may apply. Have a look at the output of ‘ioreg -l’ and search for your device.</li>
<li>Add the name of the dialing service for the modem. In order to find the proper name, plug your device in, then run scutil. In scutil, run ‘list’ and look through all Setup://Network/Service/xxxxx/Interface entries for the device (‘show Setup://Network/Service/xxxxx/Interface’, replace xxxxx with the real UUIDs your find in the output of ‘list’). Use the value in entry DeviceName as the service name and add it to the list in the file modems.plist.</li>
<li>Test if it is working.</li>
<li>Send in your results (especially the new entries in devices.plist and modems.plist) to us for continues support of that device in newer releases.</li>
</ol>
<h2 id="general">General</h2>
<p>Information is usually displayed using Cocoa’s binding, unless really unpractical. So a lot of work usually done in code is done automatically. A lot of information of how the application displays information is not visible in the code anymore but you’ll need to look at the bindings in IB instead. All strings are localized, either in Localizable.strings or in MainMenu.nib. Please send us your Localizable.strings and MainMenu.nib, if you translated CheetahWatch to another language. Debug output is automatically enabled when built in build mode ‘Debug’ and ‘Debug64’. Output is not generated for release builds (‘Release’).</p>
<h2 id="cwapplication">CWApplication</h2>
<p>Main controller, subclassed from NSApplication and created automatically at application start (see PrincipalClass entry in Info.plist). All GUI actions come here.</p>
<h2 id="cwdialer">CWDialer</h2>
<p>Monitors for network configuration changes and subscribes for HUWAEI (or others, see later) services to dial. Offering methods to connect and disconnect a service, and monitors the connection state of services (in case other applications initiate dialing or disconnects). Reads the file modems.plist for supported service names.</p>
<h2 id="cwmodem">CWModem</h2>
<p>Handles all communication with the modem (AT commands) and handles a selected number of status replies about traffic, signal level, mode etc. CWModem is creating a CWUSBFinder instance to get notified about plugged/unplugged modems.</p>
<h2 id="cwusbfinder">CWUSBFinder</h2>
<p>Monitors all USB ports for devices listed in devices.plist and notifies its delegate (usually a CWModem instance) about plugged and unplugged devices. The XML file devices.plist can be extended with new devices to be supported. One entry looks as follows:</p>
<pre><code>&lt;dict&gt;
    &lt;key&gt;
        devicePath
    &lt;/key&gt;
    &lt;string&gt;/dev/cu.HUAWEIMobile-Pcui&lt;/string&gt;
    &lt;key&gt;matchingDictionary&lt;/key&gt;
    &lt;dict&gt;
        &lt;key&gt;
            IOProviderClass
        &lt;/key&gt;
        &lt;string&gt;IOUSBDevice&lt;/string&gt;
        &lt;key&gt;
            idProduct
        &lt;/key&gt;</code></pre>
</body>
</html>
