<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>fnando_recurrence2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>r = Recurrence.new(:every =&gt; :month, :on =&gt; :last, :weekday =&gt; :friday, :repeat =&gt; 3)</p>
<h1 id="yearly">Yearly</h1>
<p>r = Recurrence.new(:every =&gt; :year, :on =&gt; [7, 4]) # =&gt; [month, day] r = Recurrence.new(:every =&gt; :year, :on =&gt; [10, 31], :interval =&gt; 3) r = Recurrence.new(:every =&gt; :year, :on =&gt; [:jan, 31]) r = Recurrence.new(:every =&gt; :year, :on =&gt; [:january, 31]) r = Recurrence.new(:every =&gt; :year, :on =&gt; [10, 31], :repeat =&gt; 3) r = Recurrence.yearly(:on =&gt; [:january, 31])</p>
<h1 id="limit-recurrence">Limit recurrence</h1>
<h1 id="starts-defaults-to-date.today">:starts defaults to Date.today</h1>
<h1 id="until-defaults-to-2037-12-31">:until defaults to 2037-12-31</h1>
<p>r = Recurrence.new(:every =&gt; :day, :starts =&gt; Date.today) r = Recurrence.new(:every =&gt; :day, :until =&gt; ‘2010-01-31’) r = Recurrence.new(:every =&gt; :day, :starts =&gt; Date.today, :until =&gt; ‘2010-01-31’)</p>
<h1 id="generate-a-collection-of-events-which-always-includes-a-final-event-with-the-given-through-date">Generate a collection of events which always includes a final event with the given through date</h1>
<h1 id="through-defaults-to-being-unset">:through defaults to being unset</h1>
<p>r = Recurrence.new(:every =&gt; :day, :through =&gt; ‘2010-01-31’) r = Recurrence.new(:every =&gt; :day, :starts =&gt; Date.today, :through =&gt; ‘2010-01-31’)</p>
<h1 id="remove-a-date-in-the-series-on-the-given-except-dates">Remove a date in the series on the given except date(s)</h1>
<h1 id="except-defaults-to-being-unset">:except defaults to being unset</h1>
<p>r = Recurrence.new(:every =&gt; :day, :except =&gt; ‘2010-01-31’) r = Recurrence.new(:every =&gt; :day, :except =&gt; [Date.today, ‘2010-01-31’])</p>
<h1 id="override-the-next-date-handler">Override the next date handler</h1>
<p>r = Recurrence.new(:every =&gt; :month, :on =&gt; 1, :handler =&gt; Proc.new { |day, month, year| raise(“Date not allowed!”) if year == 2011 &amp;&amp; month == 12 &amp;&amp; day == 31 })</p>
<h1 id="shift-the-recurrences-to-maintain-dates-around-boundaries-jan-31---feb-28---mar-28">Shift the recurrences to maintain dates around boundaries (Jan 31 -&gt; Feb 28 -&gt; Mar 28)</h1>
<p>r = Recurrence.new(:every =&gt; :month, :on =&gt; 31, :shift =&gt; true)</p>
<h1 id="getting-an-array-with-all-events">Getting an array with all events</h1>
<p>r.events.each {|date| puts date.to_s } # =&gt; Memoized array r.events!.each {|date| puts date.to_s } # =&gt; reset items cache and re-execute it r.events(:starts =&gt; ‘2009-01-01’).each {|date| puts date.to_s } r.events(:until =&gt; ‘2009-01-10’).each {|date| puts date.to_s } r.events(:through =&gt; ‘2009-01-10’).each {|date| puts date.to_s } r.events(:starts =&gt; ‘2009-01-05’, :until =&gt; ‘2009-01-10’).each {|date| puts date.to_s }</p>
<h1 id="iterating-events">Iterating events</h1>
<p>r.each { |date| puts date.to_s } # =&gt; Use items method r.each! { |date| puts date.to_s } # =&gt; Use items! method</p>
<h1 id="check-if-a-date-is-included">Check if a date is included</h1>
<p>r.include?(Date.today) # =&gt; true or false r.include?(‘2008-09-21’)</p>
<h1 id="get-next-available-date">Get next available date</h1>
</body>
</html>
