<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>rsutphin_oracle-enhanced6</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h3 id="oracle-specific-schema-statements-and-data-types">Oracle specific schema statements and data types</h3>
<p>There are several additional schema statements and data types available that you can use in database migrations:</p>
<ul>
<li><code>add_foreign_key</code> and <code>remove_foreign_key</code> for foreign key definition (and they are also dumped in <code>db/schema.rb</code>)</li>
<li><code>add_synonym</code> and <code>remove_synonym</code> for synonym definition (and they are also dumped in <code>db/schema.rb</code>)</li>
<li>You can create table with primary key trigger using <code>:primary_key_trigger =&gt; true</code> option for <code>create_table</code></li>
<li>You can define columns with <code>raw</code> type which maps to Oracleâ€™s <code>RAW</code> type</li>
<li>You can add table and column comments with <code>:comment</code> option</li>
<li>On Oracle 11g you can define <code>virtual</code> columns with calculation formula in <code>:default</code> option</li>
<li><p>Default tablespaces can be specified for tables, indexes, clobs and blobs, for example:</p>
<pre><code>ActiveRecord::ConnectionAdapters::OracleEnhancedAdapter.default_tablespaces =
  {:clob =&gt; &#39;TS_LOB&#39;, :blob =&gt; &#39;TS_LOB&#39;, :index =&gt; &#39;TS_INDEX&#39;, :table =&gt; &#39;TS_DATA&#39;}</code></pre></li>
</ul>
<h2 id="troubleshooting">TROUBLESHOOTING</h2>
<h3 id="what-to-do-if-oracle-enhanced-adapter-is-not-working">What to do if Oracle enhanced adapter is not working?</h3>
<p>Please verify that</p>
<ol type="1">
<li><p>Oracle Instant Client is installed correctly Can you connect to database using sqlnet?</p></li>
<li><p>ruby-oci8 is installed correctly Try something like:</p>
<pre><code>ruby -rubygems -e &quot;require &#39;oci8&#39;; OCI8.new(&#39;username&#39;,&#39;password&#39;,&#39;database&#39;).exec(&#39;select * from dual&#39;) do |r| puts r.join(&#39;,&#39;); end&quot;</code></pre>
<p>to verify that ruby-oci8 is working</p></li>
<li><p>Verify that activerecord-oracle_enhanced-adapter is working from irb</p>
<pre><code>require &#39;rubygems&#39;
gem &#39;activerecord&#39;
gem &#39;activerecord-oracle_enhanced-adapter&#39;
require &#39;activerecord&#39;
ActiveRecord::Base.establish_connection(:adapter =&gt; &quot;oracle_enhanced&quot;, :database =&gt; &quot;database&quot;,:username =&gt; &quot;user&quot;,:password =&gt; &quot;password&quot;)</code></pre>
<p>and see if it is successful (use your correct database, username and password)</p></li>
</ol>
<h3 id="what-to-do-if-oracle-enhanced-adapter-is-not-working-with-phusion-passenger">What to do if Oracle enhanced adapter is not working with Phusion Passenger?</h3>
<p>Oracle Instant Client and ruby-oci8 requires that several environment variables are set:</p>
<ul>
<li><code>LD_LIBRARY_PATH</code> (on Linux) or <code>DYLD_LIBRARY_PATH</code> (on Mac) should point to Oracle Instant Client directory (where Oracle client shared libraries are located)</li>
<li><code>TNS_ADMIN</code> should point to directory where <code>tnsnames.ora</code> file is located</li>
<li><code>NLS_LANG</code> should specify which territory and language NLS settings to use and which character set to use (e.g. <code>&quot;AMERICAN_AMERICA.UTF8&quot;</code>)</li>
</ul>
</body>
</html>
