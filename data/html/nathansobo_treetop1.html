<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>nathansobo_treetop1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="support">Support</h1>
<p>Support for Treetop is provided through the mailing list you can join or browse here: http://groups.google.com/group/treetop-dev</p>
<h1 id="tutorial">Tutorial</h1>
<p>Languages can be split into two components, their <em>syntax</em> and their <em>semantics</em>. It’s your understanding of English syntax that tells you the stream of words “Sleep furiously green ideas colorless” is not a valid sentence. Semantics is deeper. Even if we rearrange the above sentence to be “Colorless green ideas sleep furiously”, which is syntactically correct, it remains nonsensical on a semantic level. With Treetop, you’ll be dealing with languages that are much simpler than English, but these basic concepts apply. Your programs will need to address both the syntax and the semantics of the languages they interpret.</p>
<p>Treetop equips you with powerful tools for each of these two aspects of interpreter writing. You’ll describe the syntax of your language with a <em>parsing expression grammar</em>. From this description, Treetop will generate a Ruby parser that transforms streams of characters written into your language into <em>abstract syntax trees</em> representing their structure. You’ll then describe the semantics of your language in Ruby by defining methods on the syntax trees the parser generates.</p>
<h1 id="parsing-expression-grammars-the-basics">Parsing Expression Grammars, The Basics</h1>
<p>The first step in using Treetop is defining a grammar in a file with the <code>.treetop</code> extension. Here’s a grammar that’s useless because it’s empty:</p>
<pre><code># my_grammar.treetop
grammar MyGrammar
end</code></pre>
<p>Next, you start filling your grammar with rules. Each rule associates a name with a parsing expression, like the following:</p>
<pre><code># my_grammar.treetop
# You can use a .tt extension instead if you wish
grammar MyGrammar
  rule hello
    &#39;hello chomsky&#39;
  end
end</code></pre>
<p>The first rule becomes the <em>root</em> of the grammar, causing its expression to be matched when a parser for the grammar is fed a string. The above grammar can now be used in a Ruby program. Notice how a string matching the first rule parses successfully, but a second nonmatching string does not.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># use_grammar.rb</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">require <span class="st">&#39;rubygems&#39;</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">require <span class="st">&#39;treetop&#39;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="dt">Treetop</span>.load <span class="st">&#39;my_grammar&#39;</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># or just:</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># require &#39;my_grammar&#39;                     # This works because Polyglot hooks &quot;require&quot; to find and load Treetop files</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">    </a>
<a class="sourceLine" id="cb3-8" data-line-number="8">parser = <span class="dt">MyGrammarParser</span>.new</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">puts parser.parse(<span class="st">&#39;hello chomsky&#39;</span>)         <span class="co"># =&gt; Treetop::Runtime::SyntaxNode</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">puts parser.parse(<span class="st">&#39;silly generativists!&#39;</span>)  <span class="co"># =&gt; nil</span></a></code></pre></div>
<p>Users of <em>regular expressions</em> will find parsing expressions familiar. They share the same basic purpose, matching strings against patterns. However, parsing expressions can recognize a broader category of languages than their less expressive brethren. Before we get into demonstrating that, lets cover some basics. At first parsing expressions won’t seem much different. Trust that they are.</p>
<h2 id="terminal-symbols">Terminal Symbols</h2>
<p>The expression in the grammar above is a terminal symbol. It will only match a string that matches it exactly. There are two other kinds of terminal symbols, which we’ll revisit later. Terminals are called <em>atomic expressions</em> because they aren’t composed of smaller expressions.</p>
</body>
</html>
