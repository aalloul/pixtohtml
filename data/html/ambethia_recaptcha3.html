<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ambethia_recaptcha3</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h2 id="invisible_recaptcha_tags">invisible_recaptcha_tags</h2>
<p>Make sure to read .</p>
<h3 id="with-a-single-form-on-a-page">With a single form on a page</h3>
<ol type="1">
<li>The <code>invisible_recaptcha_tags</code> generates a submit button for you.</li>
</ol>
<pre class="erb"><code>&lt;%= form_for @foo do |f| %&gt;
  # ... other tags
  &lt;%= invisible_recaptcha_tags text: &#39;Submit form&#39; %&gt;
&lt;% end %&gt;</code></pre>
<p>Then, add <code>verify_recaptcha</code> to your controller as seen <a href="#rails-installation">above</a>.</p>
<h3 id="with-multiple-forms-on-a-page">With multiple forms on a page</h3>
<ol type="1">
<li>You will need a custom callback function, which is called after verification with Google’s reCAPTCHA service. This callback function must submit the form. Optionally, <code>invisible_recaptcha_tags</code> currently implements a JS function called <code>invisibleRecaptchaSubmit</code> that is called when no <code>callback</code> is passed. Should you wish to override <code>invisibleRecaptchaSubmit</code>, you will need to use <code>invisible_recaptcha_tags script: false</code>, see lib/recaptcha/client_helper.rb for details.</li>
<li>The <code>invisible_recaptcha_tags</code> generates a submit button for you.</li>
</ol>
<pre class="erb"><code>&lt;%= form_for @foo, html: {id: &#39;invisible-recaptcha-form&#39;} do |f| %&gt;
  # ... other tags
  &lt;%= invisible_recaptcha_tags callback: &#39;submitInvisibleRecaptchaForm&#39;, text: &#39;Submit form&#39; %&gt;
&lt;% end %&gt;</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">// app/assets/javascripts/application.js</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">var</span> submitInvisibleRecaptchaForm <span class="op">=</span> <span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;invisible-recaptcha-form&quot;</span>).<span class="at">submit</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="op">};</span></a></code></pre></div>
<p>Finally, add <code>verify_recaptcha</code> to your controller as seen <a href="#rails-installation">above</a>.</p>
<h2 id="i18n-support">I18n support</h2>
<p>reCAPTCHA passes two types of error explanation to a linked model. It will use the I18n gem to translate the default error message if I18n is available. To customize the messages to your locale, add these keys to your I18n backend:</p>
<p><code>recaptcha.errors.verification_failed</code> error message displayed if the captcha words didn’t match <code>recaptcha.errors.recaptcha_unreachable</code> displayed if a timeout error occured while attempting to verify the captcha</p>
<p>Also you can translate API response errors to human friendly by adding translations to the locale (<code>config/locales/en.yml</code>):</p>
</body>
</html>
