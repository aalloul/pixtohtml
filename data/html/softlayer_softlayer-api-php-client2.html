<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>softlayer_softlayer-api-php-client2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>// Initialize an API client for the SoftLayer_Account service. $client = ::getClient(‘SoftLayer_Account’, null, $apiUsername, $apiKey);</p>
<p>// Retrieve our account record try { $account = <span class="math inline"><em>c</em><em>l</em><em>i</em><em>e</em><em>n</em><em>t</em> −  &gt; <em>g</em><em>e</em><em>t</em><em>O</em><em>b</em><em>j</em><em>e</em><em>c</em><em>t</em>(); <em>p</em><em>r</em><em>i</em><em>n</em><em>t</em><sub><em>r</em></sub>(</span>account); } catch ($e) { die(‘Unable to retrieve account information:’ . $e-&gt;getMessage()); } ```</p>
<p>For a more complex example we’ll retrieve a support ticket with id 123456 along with the ticket’s updates, the user it’s assigned to, the servers attached to it, and the datacenter those servers are in. We’ll retrieve our extra information using a nested object mask. After we have the ticket we’ll update it with the text ‘Hello!’.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">&lt;?php</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">require_once</span> <span class="kw">__DIR__</span>.<span class="st">&#39;/vendor/autoload.php&#39;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">$apiUsername</span> = <span class="st">&#39;set me&#39;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">$apiKey</span> = <span class="st">&#39;set me too&#39;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">// Initialize an API client for ticket 123456</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw">$client</span> = \SoftLayer\SoapClient::getClient<span class="ot">(</span><span class="st">&#39;SoftLayer_Ticket&#39;</span><span class="ot">,</span> <span class="dv">123456</span><span class="ot">,</span> <span class="kw">$apiUsername</span><span class="ot">,</span> <span class="kw">$apiKey</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">// Create an object mask and assign it to our API client.</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="kw">$objectMask</span> = <span class="kw">new</span> \SoftLayer\Common\ObjectMask<span class="ot">();</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw">$objectMask</span>-&gt;updates<span class="ot">;</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="kw">$objectMask</span>-&gt;assignedUser<span class="ot">;</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="kw">$objectMask</span>-&gt;attachedHardware-&gt;datacenter<span class="ot">;</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="kw">$client</span>-&gt;setObjectMask<span class="ot">(</span><span class="kw">$objectMask</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">// Retrieve the ticket record</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="kw">try</span> {</a>
<a class="sourceLine" id="cb1-20" data-line-number="20">    <span class="kw">$ticket</span> = <span class="kw">$client</span>-&gt;getObject<span class="ot">();</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21">} <span class="kw">catch</span> <span class="ot">(</span>\<span class="kw">Exception</span> <span class="kw">$e</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb1-22" data-line-number="22">    <span class="kw">die</span><span class="ot">(</span><span class="st">&#39;Unable to retrieve ticket record: &#39;</span> . <span class="kw">$e</span>-&gt;getMessage<span class="ot">());</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">}</a>
<a class="sourceLine" id="cb1-24" data-line-number="24"></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">// Update the ticket</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="kw">$update</span> = <span class="kw">new</span> \<span class="kw">stdClass</span><span class="ot">();</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="kw">$update</span>-&gt;entry = <span class="st">&#39;Hello!&#39;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="kw">try</span> {</a>
<a class="sourceLine" id="cb1-30" data-line-number="30">    <span class="kw">$update</span> = <span class="kw">$client</span>-&gt;addUpdate<span class="ot">(</span><span class="kw">$update</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31">    <span class="kw">echo</span> <span class="st">&quot;Updated ticket 123456. The new update&#39;s id is &quot;</span> . <span class="kw">$update</span><span class="ot">[</span><span class="dv">0</span><span class="ot">]</span>-&gt;id . <span class="st">&#39;.&#39;</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32">} <span class="kw">catch</span> <span class="ot">(</span>\<span class="kw">Exception</span> <span class="kw">$e</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb1-33" data-line-number="33">    <span class="kw">die</span><span class="ot">(</span><span class="st">&#39;Unable to update ticket: &#39;</span> . <span class="kw">$e</span>-&gt;getMessage<span class="ot">());</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34">}</a></code></pre></div>
</body>
</html>
