<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>naughtyamerica_bg-secure1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="bgsecure-plugin">BgSecure Plugin</h1>
<p>Provides access methods for generating secure urls on .</p>
<h2 id="usage">Usage</h2>
<p>Create secure urls for Bit Gravity by passing the url, your Bit Gravity shared secret key, and an optional options hash.</p>
<pre><code>BgSecure.url_for(url, secret, options = {})</code></pre>
<ul>
<li>url - Either a full url (http://example.com/path/file.ext) or a path (/path/file.ext) to the secure asset. The response will be returned the same as it was sent (with or without the host). A document relative path will cause an ArgumentError. A kind_of URI::HTTP may also be passed.</li>
<li>secret - Your shared secret key from BitGravity.</li>
<li>options - An optional hash of options (explained below).</li>
</ul>
<p>Valid options:</p>
<ul>
<li>:expires - An object responding to :to_time, or and integer for seconds since UTC Epoch. If this option is not passed, evaluates to false, or if 0 is passed, the url will not expire.</li>
<li>:unlock - If set to true, will override any country based blocking. This option takes precedence over :allowed and :disallowed so please pass only one of these options.</li>
<li>:allowed - Either an array of countries [‘US’, ‘CA’] or a string “US,CA” used to indicate allowed countries. This option will override :disallowed and be overridden by :unlock so please pass only one of these options.</li>
<li>:disallowed - Either an array of countries [‘US’, ‘CA’] or a string “US,CA” used to indicate disallowed countries. This option will be overridden by :unlock or :allowed so please pass only one of these options.</li>
</ul>
<h2 id="examples">Examples</h2>
<p>Secure url that doesn’t expire</p>
<pre><code>BgSecure.url_for(&#39;http://example.com/path/file.ext&#39;, &#39;secret&#39;)</code></pre>
<blockquote>
<p>=&gt; “http://example.com/path/file.ext?e=0&amp;h=74bea39e4aa13f08a6fc862fe29574fc”</p>
</blockquote>
<p>Secure url that expires 2 days from now (time will be converted to UTC)</p>
<pre><code>BgSecure.url_for(&#39;http://example.com/path/file.ext&#39;, &#39;secret&#39;, :expires =&gt; 2.days.from_now)</code></pre>
<blockquote>
<p>=&gt; “http://example.com/path/file.ext?e=1234567890&amp;h=74bea39e4aa13f08a6fc862fe29574fc”</p>
</blockquote>
<p>Secure url that doesn’t expire but allows only US access</p>
<pre><code>BgSecure.url_for(&#39;http://example.com/path/file.ext&#39;, &#39;secret&#39;, :allowed =&gt; &#39;US&#39;)</code></pre>
<blockquote>
<p>=&gt; “http://example.com/path/file.ext?e=0&amp;a=US&amp;h=0880d05de9eb8a67146473cbceca40e3”</p>
</blockquote>
<h2 id="contributing">Contributing</h2>
<p>There are RSpec examples included with the plugin. Please spec any contributions and we will be happy to merge your changes.</p>
</body>
</html>
