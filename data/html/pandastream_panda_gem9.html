<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>pandastream_panda_gem9</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>cloud_one.videos.find(&quot;video_id_1&quot;)
cloud_two.videos.find(&quot;video_id_2&quot;)

cloud_two.profiles
cloud_two.profiles.create(:preset_name =&gt; &quot;h264&quot;)
cloud_one.videos.create(:command =&gt; &quot;ffmpeg -i $input_file$ -y $output_file$&quot;, ....)</code></pre>
<h2 id="generating-signatures">Generating signatures</h2>
<p>All requests to your Panda cloud are signed using HMAC-SHA256, based on a timestamp and your Panda secret key. This is handled transparently. However, sometimes you will want to generate only this signature, in order to make a request by means other than this library. This is the case when using the .</p>
<p>To do this, a method <code>signed_params()</code> is supported:</p>
<pre><code>    Panda.signed_params(&#39;POST&#39;, &#39;/videos.json&#39;)
    # =&gt; {&#39;access_key&#39; =&gt; &#39;8df50af4-074f-11df-b278-1231350015b1&#39;,
    # &#39;cloud_id&#39; =&gt; &#39;your-cloud-id&#39;,
    # &#39;signature&#39; =&gt; &#39;LejCdm0O83+jk6/Q5SfGmk14WTO1pB6Sh6Z5eA2w5C0=&#39;,
    # &#39;timestamp&#39; =&gt; &#39;2010-02-26T15:01:46.221513&#39;}

    Panda.signed_params(&#39;GET&#39;, &#39;/videos.json&#39;, {&#39;some_params&#39; =&gt; &#39;some_value&#39;})
    # =&gt; {&#39;access_key&#39; =&gt; &#39;8df50af4-074f-11df-b278-1231350015b1&#39;,
    #  &#39;cloud_id&#39; =&gt; &#39;your-cloud-id&#39;,
    #  &#39;signature&#39; =&gt; &#39;uHnGZ+kI9mT3C4vW71Iop9z2N7UKCv38v2l2dvREUIQ=&#39;,
    #  &#39;some_param&#39; =&gt; &#39;some_value&#39;,
    #  &#39;timestamp&#39; =&gt; &#39;2010-02-26T15:04:27.039620&#39;}</code></pre>
<h2 id="old-panda-way-still-works">Old Panda way, still works</h2>
<h3 id="creating-an-instance-of-the-client">Creating an instance of the client</h3>
<pre><code>Panda.connect!({
  :cloud_id =&gt; &#39;cloud_id&#39;, 
  :access_key =&gt; &#39;access_key&#39;, 
  :secret_key =&gt; &#39;secret_key&#39;, 
  :api_host =&gt; &#39;api.pandastream.com&#39; # This may change depending on the region
})</code></pre>
<h3 id="posting-a-video">Posting a video</h3>
<pre><code>Panda.post(&#39;/videos.json&#39;, {:file =&gt; File.new(&quot;panda.mp4&quot;)}) # Note that you will need a movie file to test this. You can grab http://panda-test-harness-videos.s3.amazonaws.com/panda.mp4

Panda.post(&#39;/videos.json&#39;, {:source_url =&gt; &#39;http://www.example.com/original_video.mp4&#39;})
=&gt;{&quot;duration&quot;=&gt;nil,
 &quot;created_at&quot;=&gt;&quot;2010/01/15 14:48:42 +0000&quot;,
 &quot;original_filename&quot;=&gt;&quot;panda.mp4&quot;,
 &quot;updated_at&quot;=&gt;&quot;2010/01/15 14:48:42 +0000&quot;,
 &quot;source_url&quot;=&gt;&quot;http://www.example.com/original_video.mp4&quot;,
 &quot;id&quot;=&gt;&quot;12fce296-01e5-11df-ae37-12313902cc92&quot;,
 &quot;extname&quot;=&gt;&quot;.mp4&quot;,</code></pre>
</body>
</html>
