<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>arthurnn_memcached2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre><code>value = &#39;hello&#39;
$cache.set &#39;test&#39;, value, 1
sleep(2)
$cache.get &#39;test&#39; #=&gt; raises Memcached::NotFound</code></pre>
<p>You can get multiple values at once:</p>
<pre><code>value = &#39;hello&#39;
$cache.set &#39;test&#39;, value
$cache.set &#39;test2&#39;, value
$cache.get [&#39;test&#39;, &#39;test2&#39;, &#39;missing&#39;]
  #=&gt; {&quot;test&quot; =&gt; &quot;hello&quot;, &quot;test2&quot; =&gt; &quot;hello&quot;}</code></pre>
<p>You can set a counter and increment it. Note that you must initialize it with an integer, encoded as an unmarshalled ASCII string:</p>
<pre><code>start = 1
$cache.set &#39;counter&#39;, start.to_s, 0, false
$cache.increment &#39;counter&#39; #=&gt; 2
$cache.increment &#39;counter&#39; #=&gt; 3
$cache.get(&#39;counter&#39;, false).to_i #=&gt; 3</code></pre>
<p>You can get some server stats:</p>
<pre><code>$cache.stats #=&gt; {..., :bytes_written=&gt;[62], :version=&gt;[&quot;1.2.4&quot;] ...}</code></pre>
<p>Note that the API is not the same as that of <strong>Ruby-MemCache</strong> or <strong>memcache-client</strong>. In particular, <code>nil</code> is a valid record value. Memcached#get does not return <code>nil</code> on failure, rather it raises <strong>Memcached::NotFound</strong>. This is consistent with the behavior of memcached itself. For example:</p>
<pre><code>$cache.set &#39;test&#39;, nil
$cache.get &#39;test&#39; #=&gt; nil
$cache.delete &#39;test&#39;
$cache.get &#39;test&#39; #=&gt; raises Memcached::NotFound</code></pre>
<h2 id="rails-3-and-4">Rails 3 and 4</h2>
<p>Use to integrate ActiveSupport cache store and memcached gem</p>
<h2 id="pipelining">Pipelining</h2>
<p>Pipelining updates is extremely effective in <strong>memcached</strong>, leading to more than 25x write throughput than the default settings. Use the following options to enable it:</p>
<pre><code>:no_block =&gt; true,
:buffer_requests =&gt; true,</code></pre>
</body>
</html>
