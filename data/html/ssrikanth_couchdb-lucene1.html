<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ssrikanth_couchdb-lucene1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="couchdb-lucene">CouchDB-Lucene</h1>
<p>This is a preliminary implementation of a [Lucene][lucene] indexer for [CouchDB][couchdb].</p>
<h2 id="dependancies">Dependancies</h2>
<ol type="1">
<li>Java - Probably requires 1.5.something</li>
<li>CouchDB - trunk</li>
<li>Git - something</li>
</ol>
<h2 id="installation">Installation</h2>
<p>This is assuming you have a working Java runtime environment and a working Ant installed.</p>
<pre><code>$ git clone git://github.com/davisp/couchdb-lucene.git couchdb-lucene
$ cd couchdb-lucene
$ ant</code></pre>
<h2 id="configuration">Configuration</h2>
<p>Assuming the build worked, youâ€™ll want to edit your local.ini config file for CouchDB to setup the external process</p>
<pre><code>[external]
fti = /path/to/java -jar /path/to/couchdb-lucene/build/couchdb-lucene-0.1-dev.jar

[httpd_db_handlers]
_fti = {couch_httpd_external, handle_external_req, &lt;&lt;&quot;fti&quot;&gt;&gt;}</code></pre>
<p>A couple things to note:</p>
<ol type="1">
<li>Remember to change /path/to/java and /path/to/couchdb-lucene with paths appropriate to your system</li>
<li>The <code>&lt;&lt;&quot;fti&quot;&gt;&gt;</code> specification in the <code>[httpd_db_handlers]</code> section must match the entry in the <code>[external]</code> section.</li>
<li>By default, indexing is only committed every 500 updates or every 60 seconds, whichever comes first.</li>
</ol>
<p>Config options can be added to the command line in the <code>[external]</code> section. These are just a few of the possible settings. For a full list see <code>org.apache.couchdb.lucene.Config</code>.</p>
<pre><code>-Xcouchdb.index.bulk=500        # Number of documents to request at once
-Xcouchdb.index.rambuf=128      # RAM buffer size in MiB
-Xcouchdb.commit.interval=60    # Commit changes a minimum of every N seconds
-Xcouchdb.commit.updates=500    # Commit changes a minimum of every N updates (Node wide)
-Xcouchdb.debug.enabled=&quot;true&quot;  # Enable DEBUG mode that addes a few query string parameters.</code></pre>
<h2 id="indexing">Indexing</h2>
</body>
</html>
