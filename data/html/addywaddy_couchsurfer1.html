<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>addywaddy_couchsurfer1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="couchsurfer---couchdb-orm">CouchSurfer - CouchDB ORM</h1>
<table style="width:15%;">
<colgroup>
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CouchSurfer is an extraction of CouchRest::Model from the excellent gem by J. Chris Anderson. In addition, it provides association and validation methods.</td>
</tr>
<tr class="even">
<td>Associations</td>
</tr>
</tbody>
</table>
<p>CouchSurfer provides the following 4 association kinds:</p>
<ul>
<li><code>belongs_to</code></li>
<li><code>has_many</code></li>
<li><code>has_many :inline</code>; and</li>
<li><code>has_many :through</code></li>
</ul>
<p>All association kinds take an optional <code>:class_name</code> option should you want your association to be named differently to the associated model.</p>
<pre><code>class Page
  …
  belongs_to :owner, :class_name =&gt; :user
  …
end

page = Page.create(…)
page.owner # returns an instance of user</code></pre>
<p>The <code>belongs_to</code> associations accept two additional options - <code>:view</code> and <code>query</code>, enabling you to customise your associations to fit your needs. You must explicitly declare the view on the child model for associations to work</p>
<p><strong>Example 1: basic</strong></p>
<pre><code>class User
  …
  has_many :pages
  …
end

class Page
  …
  view_by :user_id
  …
end

user = User.create(…)
10.times {Page.create(…, :user_id =&gt; user.id)}
user.pages</code></pre>
<p><strong>Example 2: with options</strong></p>
</body>
</html>
