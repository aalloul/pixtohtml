<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>kragen_dumbfts1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="dumb-full-text-search">Dumb Full Text Search</h1>
<p>This is a full-text indexing and search engine for my email, in about 300 lines of code. It can produce results for many (most?) queries on my 12-gigabyte mailbox in under two seconds on my 700MHz laptop. (Which sometimes reduces its clock rate to 550MHz.) I just updated the index after not doing so for three months, and it took about three hours to index the two new gigabytes of email. It manages to index about 24 megabytes per minute, which is a bit faster than I can download my email over my internet connection.</p>
<p>From [Earl] (http://earl.strain.at/space/comments-2008-12-23):</p>
<blockquote>
<p>8m18s to index a 1.3 GB mbox on my dual-core 2.6GHz notebook. The resulting index is 1.2GB according to <code>du</code> and spread over 27 segments.</p>
<p>Without any post-processing, most queries take between 6 to 10 seconds wall clock on the same machine, as measured by <code>time fts mbox query &gt; /dev/null</code>. Query time doesn’t change much if I store the index in memory (on a ramfs), but I’ve 4GB memory here, so the index was in a fs cache even without ramfs.</p>
</blockquote>
<p>Perhaps unsurprisingly, that’s about 6× faster at indexing than my machine. I have some hope that he’ll get better query performance with some changes I’ve made since then.</p>
<h2 id="feature-list">Feature list</h2>
<ul>
<li>full-text email search</li>
<li>incremental reindexing</li>
<li>fielded search on arbitrary mail headers</li>
<li>partial-word search</li>
<li>multi-term search</li>
<li>extreme internal simplicity</li>
<li>all in Python except for a bash script</li>
</ul>
<h2 id="applicability">Applicability</h2>
<p>Obviously such a simple system is somewhat limited in its applicability. Here are some things that must be true in order to use it:</p>
<ol type="1">
<li>The entire corpus to be searched is in a single big Berkeley mbox file.</li>
<li>As with <code>grep</code> or <code>mboxgrep</code>, the objective is to get all of the results, without ranking them in terms of relevance.</li>
</ol>
</body>
</html>
