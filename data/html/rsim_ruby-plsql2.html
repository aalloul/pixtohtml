<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>rsim_ruby-plsql2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>cursor.fetch # =&gt; one row from cursor cursor.fetch_all # =&gt; all rows from cursor end</p>
<p>plsql.connection.autocommit = false plsql.commit plsql.rollback</p>
<p>plsql.logoff ```</p>
<p>Look at RSpec tests under spec directory for more usage examples.</p>
<p>Note: named arguments in procedures calls should be in lower case.</p>
<h3 id="table-operations">Table operations:</h3>
<p>ruby-plsql also provides simple API for select/insert/update/delete table operations (with Sequel-like syntax). This could be useful if ruby-plsql is used without ActiveRecord (e.g. for writing PL/SQL unit tests):</p>
<p>```ruby # insert record in table employee = { :employee_id =&gt; 1, :first_name =&gt; ‘First’, :last_name =&gt; ‘Last’, :hire_date =&gt; Time.local(2000,01,31) } plsql.employees.insert employee # INSERT INTO employees VALUES (1, ‘First’, ‘Last’, …)</p>
<h1 id="insert-many-records">insert many records</h1>
<p>employees = [employee1, employee2, … ] # array of many Hashes plsql.employees.insert employees</p>
<h1 id="insert-many-records-as-list-of-values">insert many records as list of values</h1>
<p>plsql.employees.insert_values [:employee_id, :first_name, :last_name], [1, ‘First 1’, ‘Last 1’], [2, ‘First 2’, ‘Last 2’]</p>
<h1 id="select-one-record">select one record</h1>
<p>plsql.employees.first # SELECT * FROM employees # fetch first row =&gt; {:employee_id =&gt; …, :first_name =&gt; ‘…’, …} plsql.employees.first(:employee_id =&gt; 1) # SELECT * FROM employees WHERE employee_id = 1 plsql.employees.first(“WHERE employee_id = 1”) plsql.employees.first(“WHERE employee_id = :employee_id”, 1)</p>
<h1 id="select-many-records">select many records</h1>
<p>plsql.employees.all # =&gt; [{…}, {…}, …] plsql.employees.all(:order_by =&gt; :employee_id) plsql.employees.all(“WHERE employee_id &gt; :employee_id”, 5)</p>
<h1 id="count-records">count records</h1>
<p>plsql.employees.count # SELECT COUNT(*) FROM employees plsql.employees.count(“WHERE employee_id &gt; :employee_id”, 5)</p>
<h1 id="update-records">update records</h1>
</body>
</html>
