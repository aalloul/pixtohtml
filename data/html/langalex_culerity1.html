<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>langalex_culerity1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h2 id="introduction">Introduction</h2>
<p>Culerity integrates Cucumber and Celerity in order to test your application’s full stack.</p>
<p>Culerity lets you: * run Celerity from within Cucumber which allows you to test the full stack of your Rails (or other web) application from Database to in browser JavaScript * run your application in any Ruby (like MRI 1.8.6) while Celerity runs in JRuby so you can still use gems/plugins that would not work with JRuby * reuse existing Webrat-Style step definitions</p>
<h2 id="getting-started">Getting Started</h2>
<p>The following guide is written for a Rails application (tested with 2.3.5) but Culerity should work with any other Web Framework that is supported by Cucumber.</p>
<p>First download JRuby and unpack it to some location, for example $HOME/jruby. Make sure that the jruby executable is in your path. You can do this by either setting your PATH accordingly…</p>
<pre><code>export PATH=$HOME/jruby/bin:$PATH</code></pre>
<p>… or by creating a symlink from your bin directory:</p>
<pre><code>ln -s $HOME/jruby/bin/jruby /usr/bin/jruby</code></pre>
<p>You will need the celerity gem installed into JRuby:</p>
<pre><code>jruby -S gem install celerity</code></pre>
<p>Now install the Culerity gem:</p>
<pre><code>gem install culerity --source http://gemcutter.org</code></pre>
<p>Assuming you have a Rails application set up already you can run the RSpec, Cucumber and Culerity generators:</p>
<pre><code>cd RAILS_ROOT
script/generate rspec
script/generate cucumber
script/generate culerity</code></pre>
<p>This creates the features folder and a file culerity_steps.rb into your application. This file contains step definitions for basic interactions like clicking links or filling out forms. Now is a good time to get rid of any webrat specific files generated by cucumber (i.e. features/step_definitions/webrat_steps.rb).</p>
<p>After you have written a first feature you can run it just like you would run a standard cucumber feature. The only difference is that you have to start a web server (e.g. mongrel) with the test environment enabled beforehand.</p>
<pre><code>rake culerity:rails:start
cucumber features/my_feature.feature</code></pre>
<p>The Rails instance uses a special environment culerity.</p>
<p>When you have finished running culerity/cucumber you can turn off the Rails instance:</p>
<p>NOTE: The default port for this server is 3001. You can change this in features/step_definitions/common_celerity.rb</p>
<pre><code>rake culerity:rails:stop</code></pre>
</body>
</html>
